import{L as T,o as r,f as n,g as e,k as i,F as E,x as I,I as L,m as p,q as w,v as P,t as x,l as y,K as C,n as g,h as M,i as z,u as $,j,r as b,e as q}from"./vendor-DYpG4QdT.js";import{_ as D}from"./index-D7Lj447K.js";const S={class:"auth-page min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 to-secondary/5 py-8"},U={class:"max-w-md w-full mx-4"},B={class:"card p-8 border-2 border-secondary/20"},F={class:"flex items-center justify-center gap-2 mb-8"},O={class:"space-y-4"},A={key:0,class:"bg-destructive/10 border border-destructive text-destructive p-3 rounded text-sm"},H=["disabled"],K={key:0},G={key:1},J={class:"space-y-4"},Q={class:"text-center mb-6"},W={class:"text-muted-foreground text-sm"},X={class:"text-center"},Y=["disabled"],Z={key:0,class:"bg-destructive/10 border border-destructive text-destructive p-3 rounded text-sm"},ee=["disabled"],te={key:0},se={key:1},le={class:"space-y-4"},oe={class:"relative"},ae=["type"],re={class:"relative"},ne=["type"],ie={key:0,class:"bg-destructive/10 border border-destructive text-destructive p-3 rounded text-sm"},ue={key:1,class:"bg-success/10 border border-success text-success p-3 rounded text-sm"},de=["disabled"],ve={key:0},me={key:1},ce={key:0,class:"text-center mt-6 pt-6 border-t border-border"},fe={__name:"MotDePasseOublie",setup(pe){const h=q(),c=b(1),v=b(!1),o=b(!1),s=b(""),d=b(""),f=b(0);let m=null;const l=b({email:"",code:"",newPassword:"",confirmPassword:""}),_=async()=>{if(s.value="",d.value="",!l.value.email){s.value="Veuillez entrer votre email";return}if(!l.value.email.includes("@")){s.value="Email invalide";return}o.value=!0;try{await new Promise(u=>setTimeout(u,1e3)),d.value=`Code envoyé à ${l.value.email}`,c.value=2,f.value=60,k()}catch{s.value="Erreur lors de l'envoi du code"}finally{o.value=!1}},V=async()=>{s.value="",d.value="",o.value=!0;try{await new Promise(u=>setTimeout(u,1e3)),d.value="Nouveau code envoyé",f.value=60,m&&clearInterval(m),k()}catch{s.value="Erreur lors du renvoi du code"}finally{o.value=!1}},k=()=>{m&&clearInterval(m),m=setInterval(()=>{f.value--,f.value<=0&&clearInterval(m)},1e3)},R=async()=>{if(s.value="",d.value="",l.value.code.length!==6){s.value="Le code doit contenir 6 chiffres";return}o.value=!0;try{await new Promise(u=>setTimeout(u,1e3)),d.value="Code vérifié avec succès",c.value=3}catch{s.value="Code invalide"}finally{o.value=!1}},N=async()=>{if(s.value="",d.value="",l.value.newPassword.length<8){s.value="Le mot de passe doit avoir au moins 8 caractères";return}if(l.value.newPassword!==l.value.confirmPassword){s.value="Les mots de passe ne correspondent pas";return}o.value=!0;try{await new Promise(u=>setTimeout(u,1500)),d.value="Mot de passe réinitialisé avec succès!",setTimeout(()=>{h.push("/auth/connexion")},1500)}catch{s.value="Erreur lors de la réinitialisation"}finally{o.value=!1}};return T(()=>{m&&clearInterval(m)}),(u,t)=>(r(),n("div",S,[e("div",U,[e("div",B,[t[28]||(t[28]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-3xl font-bold text-primary mb-2"},[i(" Home"),e("span",{class:"text-secondary"},"Cameroon")]),e("p",{class:"text-muted-foreground"},"Réinitialiser votre mot de passe")],-1)),e("div",F,[(r(),n(E,null,I(3,a=>e("div",{key:a,class:g(["w-10 h-10 rounded-full flex items-center justify-center font-bold transition-all",c.value>=a?"bg-primary text-primary-foreground":"bg-input text-muted-foreground"])},x(a),3)),64))]),e("form",{onSubmit:L(N,["prevent"]),class:"space-y-4"},[p(e("div",O,[t[10]||(t[10]=e("div",{class:"text-center mb-6"},[e("i",{class:"fas fa-envelope text-primary text-4xl mb-4 block"}),e("h2",{class:"text-xl font-bold text-foreground mb-2"},"Récupérez votre compte"),e("p",{class:"text-muted-foreground text-sm"}," Entrez votre adresse email. Nous vous enverrons les instructions pour réinitialiser votre mot de passe. ")],-1)),e("div",null,[t[6]||(t[6]=e("label",{for:"email",class:"block text-sm font-medium text-foreground mb-2"}," Adresse email ",-1)),p(e("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=a=>l.value.email=a),type:"email",required:"",class:"input w-full",placeholder:"votre@email.com"},null,512),[[P,l.value.email]])]),s.value?(r(),n("div",A,[t[7]||(t[7]=e("i",{class:"fas fa-exclamation-circle mr-2"},null,-1)),i(" "+x(s.value),1)])):y("",!0),e("button",{type:"button",onClick:_,disabled:o.value,class:"btn btn-primary w-full"},[o.value?(r(),n("span",G,[...t[9]||(t[9]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),i(" Envoi en cours... ",-1)])])):(r(),n("span",K,[...t[8]||(t[8]=[e("i",{class:"fas fa-paper-plane mr-2"},null,-1),i(" Envoyer le code ",-1)])]))],8,H)],512),[[w,c.value===1]]),p(e("div",J,[e("div",Q,[t[12]||(t[12]=e("i",{class:"fas fa-key text-primary text-4xl mb-4 block"},null,-1)),t[13]||(t[13]=e("h2",{class:"text-xl font-bold text-foreground mb-2"},"Vérification",-1)),e("p",W,[t[11]||(t[11]=i(" Nous avons envoyé un code à ",-1)),e("strong",null,x(l.value.email),1)])]),e("div",null,[t[14]||(t[14]=e("label",{for:"code",class:"block text-sm font-medium text-foreground mb-2"}," Code de vérification (6 chiffres) ",-1)),p(e("input",{id:"code","onUpdate:modelValue":t[1]||(t[1]=a=>l.value.code=a),type:"text",maxlength:"6",placeholder:"000000",class:"input w-full text-center text-2xl tracking-widest",required:""},null,512),[[P,l.value.code]])]),e("div",X,[t[15]||(t[15]=e("p",{class:"text-muted-foreground text-sm mb-2"}," Vous n'avez pas reçu le code? ",-1)),e("button",{type:"button",onClick:V,disabled:f.value>0,class:"text-primary hover:underline text-sm font-medium disabled:text-muted-foreground"},x(f.value>0?`Renvoyer dans ${f.value}s`:"Renvoyer le code"),9,Y)]),s.value?(r(),n("div",Z,[t[16]||(t[16]=e("i",{class:"fas fa-exclamation-circle mr-2"},null,-1)),i(" "+x(s.value),1)])):y("",!0),e("button",{type:"button",onClick:R,disabled:o.value||l.value.code.length!==6,class:"btn btn-primary w-full"},[o.value?(r(),n("span",se,[...t[18]||(t[18]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),i(" Vérification... ",-1)])])):(r(),n("span",te,[...t[17]||(t[17]=[e("i",{class:"fas fa-check mr-2"},null,-1),i(" Vérifier le code ",-1)])]))],8,ee)],512),[[w,c.value===2]]),p(e("div",le,[t[26]||(t[26]=e("div",{class:"text-center mb-6"},[e("i",{class:"fas fa-lock text-primary text-4xl mb-4 block"}),e("h2",{class:"text-xl font-bold text-foreground mb-2"},"Nouveau mot de passe"),e("p",{class:"text-muted-foreground text-sm"}," Créez un nouveau mot de passe sécurisé pour votre compte ")],-1)),e("div",null,[t[19]||(t[19]=e("label",{for:"newPassword",class:"block text-sm font-medium text-foreground mb-2"}," Nouveau mot de passe ",-1)),e("div",oe,[p(e("input",{id:"newPassword","onUpdate:modelValue":t[2]||(t[2]=a=>l.value.newPassword=a),type:v.value?"text":"password",required:"",class:"input w-full pr-10",placeholder:"••••••••"},null,8,ae),[[C,l.value.newPassword]]),e("button",{type:"button",onClick:t[3]||(t[3]=a=>v.value=!v.value),class:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground"},[e("i",{class:g(`fas fa-eye${v.value?"":"-slash"}`)},null,2)])]),t[20]||(t[20]=e("p",{class:"text-xs text-muted-foreground mt-1"},"Min. 8 caractères avec majuscule et chiffre",-1))]),e("div",null,[t[21]||(t[21]=e("label",{for:"confirmPassword",class:"block text-sm font-medium text-foreground mb-2"}," Confirmer le mot de passe ",-1)),e("div",re,[p(e("input",{id:"confirmPassword","onUpdate:modelValue":t[4]||(t[4]=a=>l.value.confirmPassword=a),type:v.value?"text":"password",required:"",class:"input w-full pr-10",placeholder:"••••••••"},null,8,ne),[[C,l.value.confirmPassword]]),e("button",{type:"button",onClick:t[5]||(t[5]=a=>v.value=!v.value),class:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground"},[e("i",{class:g(`fas fa-eye${v.value?"":"-slash"}`)},null,2)])])]),s.value?(r(),n("div",ie,[t[22]||(t[22]=e("i",{class:"fas fa-exclamation-circle mr-2"},null,-1)),i(" "+x(s.value),1)])):y("",!0),d.value?(r(),n("div",ue,[t[23]||(t[23]=e("i",{class:"fas fa-check-circle mr-2"},null,-1)),i(" "+x(d.value),1)])):y("",!0),e("button",{type:"submit",disabled:o.value,class:"btn btn-primary w-full"},[o.value?(r(),n("span",me,[...t[25]||(t[25]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),i(" Réinitialisation... ",-1)])])):(r(),n("span",ve,[...t[24]||(t[24]=[e("i",{class:"fas fa-check mr-2"},null,-1),i(" Réinitialiser le mot de passe ",-1)])]))],8,de)],512),[[w,c.value===3]])],32),c.value===1?(r(),n("div",ce,[M($(j),{to:"/auth/connexion",class:"text-primary hover:underline text-sm font-medium"},{default:z(()=>[...t[27]||(t[27]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),i(" Retour à la connexion ",-1)])]),_:1})])):y("",!0)])])]))}},ye=D(fe,[["__scopeId","data-v-44fbb6d0"]]);export{ye as default};
