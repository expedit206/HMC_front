import{D as U,o as s,f as r,g as e,n as c,h as p,i as g,u as v,j as f,l as i,k as h,I as G,F as M,x as F,m as I,v as N,s as R,a as k,r as d,e as H,t as u}from"./vendor-DYpG4QdT.js";import{_ as O,u as Q}from"./index-1P3Q4JPB.js";const J={class:"bg-[#FAF9F5] text-gray-800 antialiased min-h-screen flex relative"},K={class:"h-full flex flex-col py-8 px-4 overflow-y-auto custom-scrollbar"},W={class:"space-y-2"},X={key:0},Y={key:0},Z={key:0},ee={key:0},te={key:0},ae={key:0,class:"mt-8 pt-8 border-t border-gray-100"},se={class:"space-y-1"},re={class:"mt-auto pt-6"},le={key:0},ne={class:"flex-1 overflow-y-auto bg-[#FAF9F5] p-4 lg:p-8"},oe={class:"max-w-6xl mx-auto"},ie={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4"},de={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ue={class:"bg-white rounded-3xl w-full max-w-lg relative z-10 shadow-2xl overflow-hidden transition-all transform scale-100"},ce={class:"px-8 py-6 border-b border-gray-100 flex justify-between items-center"},xe={key:0,class:"p-4 bg-orange-50 text-orange-700 rounded-2xl text-xs"},pe={class:"grid grid-cols-2 gap-3"},ge=["onClick"],ve={class:"flex gap-4 pt-4"},fe=["disabled"],me={key:0},be={key:1},ye={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},he={class:"lg:col-span-2 space-y-6"},ke={key:0,class:"text-center py-12 bg-white rounded-3xl border border-gray-100 italic text-gray-400"},we={class:"flex-1"},_e={class:"flex justify-between items-start mb-2"},Ee={class:"text-base font-bold text-[#1B0B38]"},Ce={class:"text-[10px] text-[#E54801] font-bold uppercase tracking-widest mt-0.5"},Se={class:"text-xs text-gray-400 font-medium mt-1"},Be={class:"text-sm text-gray-500 mb-6"},je={class:"flex items-center justify-between pt-4 border-t border-gray-50"},De={class:"flex items-center gap-3"},ze={class:"text-xs font-bold text-[#1B0B38]"},Ve={key:0,class:"text-[10px] font-black text-[#E54801] uppercase tracking-widest hover:underline"},Me={key:1,class:"text-[10px] text-green-600 font-bold uppercase"},Fe={key:2,class:"bg-white rounded-3xl p-16 text-center border border-dashed border-gray-200"},Ie={__name:"Interventions",setup(Ne){const $=H(),A=Q(),o=d(!0),C=d(!1),w=d(!0),_=d([]),m=d(!1),b=d(!1),y=d(null),S=d([]),l=d({service_id:null,scheduled_at:"",notes:""}),B=async()=>{w.value=!0;try{const n=await k.get("/api/tenant/interventions");n.data.success&&(_.value=n.data.data);const t=await k.get("/api/tenant/dashboard");t.data.success&&t.data.data.active_rental&&(y.value=t.data.data.active_rental.property);const a=await k.get("/api/services");a.data.success&&(S.value=a.data.data.slice(0,4))}catch(n){console.error("Erreur chargement données:",n)}finally{w.value=!1}};U(B);const L=async()=>{var n,t;if(!l.value.service_id||!l.value.scheduled_at||!l.value.notes){alert("Veuillez remplir tous les champs.");return}b.value=!0;try{const a={property_id:y.value.id,service_id:l.value.service_id,scheduled_at:l.value.scheduled_at.replace("T"," "),notes:l.value.notes},{data:x}=await k.post("/api/tenant/interventions",a);x.success&&(alert("Votre demande a été envoyée !"),m.value=!1,l.value={service_id:null,scheduled_at:"",notes:""},await B())}catch(a){console.error("Erreur envoi intervention:",a),alert(((t=(n=a.response)==null?void 0:n.data)==null?void 0:t.message)||"Une erreur est survenue.")}finally{b.value=!1}},T=async()=>{await A.logout(),$.push("/auth/connexion")},q=n=>{switch(n){case"pending":return"bg-orange-50 text-orange-600";case"accepted":return"bg-blue-50 text-blue-600";case"completed":return"bg-green-50 text-green-600";case"rejected":return"bg-red-50 text-red-600";default:return"bg-gray-50 text-gray-600"}},P=n=>{switch(n){case"pending":return"En attente";case"accepted":return"Acceptée";case"completed":return"Terminée";case"rejected":return"Rejetée";default:return n}};return(n,t)=>(s(),r("div",J,[e("aside",{id:"sidebar",class:c(["fixed inset-y-0 left-0 z-40 bg-white border-r border-gray-100 transition-all -translate-x-full lg:translate-x-0 lg:sticky lg:top-0 h-screen lg:h-auto overflow-hidden",o.value?"w-64":"w-20"])},[e("div",K,[e("button",{onClick:t[0]||(t[0]=a=>o.value=!o.value),class:"hidden lg:flex items-center justify-center w-8 h-8 rounded-lg bg-gray-50 hover:bg-orange-50 text-gray-400 hover:text-[#E54801] transition mb-6 ml-auto"},[e("i",{class:c(`fas fa-chevron-${o.value?"left":"right"} text-xs`)},null,2)]),e("div",W,[p(v(f),{to:"/locataire/dashboard",class:"sidebar-link flex items-center gap-4 px-4 py-3.5 rounded-2xl text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-[#E54801] transition-all group"},{default:g(()=>[t[8]||(t[8]=e("i",{class:"fas fa-th-large w-5 text-center group-hover:scale-110 transition-transform"},null,-1)),o.value?(s(),r("span",X,"Tableau de bord")):i("",!0)]),_:1}),p(v(f),{to:"/locataire/mes-locations",class:"sidebar-link flex items-center gap-4 px-4 py-3.5 rounded-2xl text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-[#E54801] transition-all group"},{default:g(()=>[t[9]||(t[9]=e("i",{class:"fas fa-key w-5 text-center group-hover:scale-110 transition-transform"},null,-1)),o.value?(s(),r("span",Y,"Mes Locations")):i("",!0)]),_:1}),p(v(f),{to:"/locataire/mes-paiements",class:"sidebar-link flex items-center gap-4 px-4 py-3.5 rounded-2xl text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-[#E54801] transition-all group"},{default:g(()=>[t[10]||(t[10]=e("i",{class:"fas fa-credit-card w-5 text-center group-hover:scale-110 transition-transform"},null,-1)),o.value?(s(),r("span",Z,"Mes Paiements")):i("",!0)]),_:1}),p(v(f),{to:"/locataire/interventions",class:"sidebar-link active flex items-center gap-4 px-4 py-3.5 rounded-2xl text-sm font-medium transition-all group"},{default:g(()=>[t[11]||(t[11]=e("i",{class:"fas fa-tools w-5 text-center group-hover:scale-110 transition-transform"},null,-1)),o.value?(s(),r("span",ee,"Interventions")):i("",!0)]),_:1}),p(v(f),{to:"/locataire/mes-favoris",class:"sidebar-link flex items-center gap-4 px-4 py-3.5 rounded-2xl text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-[#E54801] transition-all group"},{default:g(()=>[t[12]||(t[12]=e("i",{class:"fas fa-heart w-5 text-center group-hover:scale-110 transition-transform"},null,-1)),o.value?(s(),r("span",te,"Mes Favoris")):i("",!0)]),_:1})]),o.value?(s(),r("div",ae,[t[15]||(t[15]=e("p",{class:"px-4 text-[11px] font-bold text-gray-400 uppercase tracking-widest mb-4"}," Compte ",-1)),e("div",se,[p(v(f),{to:"/locataire/mon-profil",class:"sidebar-link flex items-center gap-4 px-4 py-3.5 rounded-2xl text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-[#E54801] transition-all group"},{default:g(()=>[...t[13]||(t[13]=[e("i",{class:"fas fa-user-circle w-5 text-center group-hover:scale-110 transition-transform"},null,-1),e("span",null,"Mon Profil",-1)])]),_:1}),p(v(f),{to:"/bailleur/formulaire",class:"sidebar-link flex items-center gap-4 px-4 py-3.5 rounded-2xl text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-[#E54801] transition-all group"},{default:g(()=>[...t[14]||(t[14]=[e("i",{class:"fas fa-hand-holding-heart w-5 text-center group-hover:scale-110 transition-transform"},null,-1),e("span",null,"Devenir Bailleur",-1)])]),_:1})])])):i("",!0),e("div",re,[e("button",{onClick:T,class:"w-full text-xs font-bold text-red-500 hover:bg-red-50 py-3 rounded-xl transition-colors uppercase tracking-widest flex items-center justify-center gap-2 group"},[t[16]||(t[16]=e("i",{class:"fas fa-sign-out-alt group-hover:translate-x-1 transition-transform"},null,-1)),o.value?(s(),r("span",le,"Déconnexion")):i("",!0)])])])],2),C.value?(s(),r("div",{key:0,onClick:t[1]||(t[1]=a=>C.value=!1),class:"fixed inset-0 bg-black/50 z-30 backdrop-blur-sm lg:hidden"})):i("",!0),e("main",ne,[e("div",oe,[e("div",ie,[t[18]||(t[18]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 leading-tight"}," Interventions & Réparations "),e("p",{class:"text-gray-500 text-sm mt-1 font-medium tracking-wide"}," Déclarez un incident ou suivez l'avancement des réparations dans votre logement. ")],-1)),e("div",null,[e("button",{onClick:t[2]||(t[2]=a=>m.value=!0),class:"px-6 py-3 bg-[#1B0B38] text-white rounded-xl text-xs font-bold uppercase tracking-widest hover:scale-105 transition-all shadow-md flex items-center gap-2"},[...t[17]||(t[17]=[e("i",{class:"fas fa-plus"},null,-1),h(" Nouvelle demande ",-1)])])])]),m.value?(s(),r("div",de,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[3]||(t[3]=a=>m.value=!1)}),e("div",ue,[e("div",ce,[t[20]||(t[20]=e("div",null,[e("h3",{class:"text-xl font-bold text-gray-900"}," Signaler un incident "),e("p",{class:"text-xs text-gray-500 mt-1"}," Expliquez-nous le problème rencontré dans votre logement. ")],-1)),e("button",{onClick:t[4]||(t[4]=a=>m.value=!1),class:"text-gray-400 hover:text-gray-600"},[...t[19]||(t[19]=[e("i",{class:"fas fa-times text-xl"},null,-1)])])]),e("form",{onSubmit:G(L,["prevent"]),class:"p-8 space-y-6"},[y.value?i("",!0):(s(),r("div",xe,[...t[21]||(t[21]=[e("i",{class:"fas fa-exclamation-triangle mr-2"},null,-1),h(" Vous n'avez pas de location active enregistrée pour soumettre une demande. ",-1)])])),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2"},"Choisir une catégorie",-1)),e("div",pe,[(s(!0),r(M,null,F(S.value,a=>{var x;return s(),r("button",{key:a.id,type:"button",onClick:E=>l.value.service_id=a.id,class:c(["p-4 rounded-2xl border-2 text-left transition-all group",l.value.service_id===a.id?"border-[#E54801] bg-orange-50":"border-gray-50 hover:border-gray-200 bg-gray-50/50"])},[e("i",{class:c([[((x=a.category)==null?void 0:x.icon)||"fas fa-tools",l.value.service_id===a.id?"text-[#E54801]":"text-gray-400"],"text-xl mb-2 block transition-colors"])},null,2),e("span",{class:c(["text-sm font-bold block",l.value.service_id===a.id?"text-[#E54801]":"text-gray-700"])},u(a.title),3)],10,ge)}),128))])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2"},"Date souhaitée pour l'intervention",-1)),I(e("input",{type:"datetime-local","onUpdate:modelValue":t[5]||(t[5]=a=>l.value.scheduled_at=a),required:"",class:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#E54801] outline-none text-sm"},null,512),[[N,l.value.scheduled_at]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2"},"Description du problème",-1)),I(e("textarea",{rows:"4","onUpdate:modelValue":t[6]||(t[6]=a=>l.value.notes=a),placeholder:"Détaillez le problème au maximum (ex: fuite d'eau sous l'évier de la cuisine)...",required:"",class:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#E54801] outline-none text-sm resize-none"},null,512),[[N,l.value.notes]])]),e("div",ve,[e("button",{type:"button",onClick:t[7]||(t[7]=a=>m.value=!1),class:"flex-1 py-4 text-xs font-bold text-gray-400 uppercase tracking-widest hover:bg-gray-50 rounded-2xl transition-colors"}," Annuler "),e("button",{type:"submit",disabled:b.value||!y.value,class:"flex-1 py-4 bg-[#1B0B38] text-white rounded-2xl text-xs font-bold uppercase tracking-widest hover:bg-[#E54801] transition-all shadow-lg shadow-purple-100 disabled:opacity-50"},[b.value?(s(),r("span",be,[...t[25]||(t[25]=[e("i",{class:"fas fa-circle-notch fa-spin mr-2"},null,-1),h("Envoi...",-1)])])):(s(),r("span",me,"Envoyer la demande"))],8,fe)])],32)])])):i("",!0),e("div",ye,[e("div",he,[t[30]||(t[30]=e("h3",{class:"text-xs font-black text-gray-400 uppercase tracking-[0.2em] mb-4"}," Historique des demandes ",-1)),w.value?(s(),r("div",ke,[...t[26]||(t[26]=[e("i",{class:"fas fa-circle-notch fa-spin mr-2"},null,-1),h(" Chargement... ",-1)])])):_.value.length>0?(s(!0),r(M,{key:1},F(_.value,a=>{var x,E,j,D,z,V;return s(),r("div",{key:a.id,class:"bg-white p-6 rounded-3xl shadow-sm border border-gray-100 flex gap-6 hover:shadow-md transition-all"},[e("div",{class:c(["w-14 h-14 rounded-2xl flex items-center justify-center text-xl shrink-0",a.status==="completed"?"bg-green-50 text-green-600":"bg-orange-50 text-[#E54801]"])},[e("i",{class:c(((E=(x=a.service)==null?void 0:x.category)==null?void 0:E.icon)||"fas fa-tools")},null,2)],2),e("div",we,[e("div",_e,[e("div",null,[e("h4",Ee,u((j=a.service)==null?void 0:j.title),1),e("p",Ce,u(((D=a.property)==null?void 0:D.title)||"Bien non spécifié"),1),e("p",Se," Réf: #INT-"+u(String(a.id).padStart(4,"0"))+" • "+u(new Date(a.scheduled_at).toLocaleDateString()),1)]),e("span",{class:c(["px-2.5 py-1 text-[10px] font-bold rounded-lg uppercase tracking-wide",q(a.status)])},u(P(a.status)),3)]),e("p",Be,u(a.notes),1),e("div",je,[e("div",De,[t[28]||(t[28]=e("div",{class:"w-8 h-8 rounded-full bg-gray-100 overflow-hidden flex items-center justify-center text-gray-400"},[e("i",{class:"fas fa-hard-hat"})],-1)),e("div",null,[t[27]||(t[27]=e("p",{class:"text-[10px] text-gray-400 font-bold uppercase"}," Catégorie ",-1)),e("p",ze,u(((V=(z=a.service)==null?void 0:z.category)==null?void 0:V.name)||"Général"),1)])]),a.status!=="completed"?(s(),r("button",Ve," Suivre en temps réel ")):(s(),r("span",Me," Terminé le "+u(new Date(a.completed_at).toLocaleDateString()),1))])])])}),128)):(s(),r("div",Fe,[...t[29]||(t[29]=[R('<div class="w-20 h-20 bg-gray-50 rounded-full flex items-center justify-center text-gray-300 text-3xl mx-auto mb-6" data-v-0e01ae69><i class="fas fa-tools" data-v-0e01ae69></i></div><h3 class="text-xl font-bold text-gray-400 uppercase tracking-tight" data-v-0e01ae69> Aucune intervention </h3><p class="text-sm text-gray-400 mt-2 max-w-xs mx-auto" data-v-0e01ae69> Vous n&#39;avez pas encore déclaré d&#39;incident ou de besoin de réparation. </p><button class="inline-block mt-8 px-10 py-4 bg-[#E54801] text-white rounded-xl text-xs font-bold uppercase tracking-widest shadow-lg" data-v-0e01ae69> Nouvelle demande </button>',4)])]))]),t[31]||(t[31]=R('<div class="space-y-6" data-v-0e01ae69><div class="bg-[#1B0B38] rounded-3xl p-8 text-white shadow-xl" data-v-0e01ae69><h3 class="text-sm font-black uppercase tracking-tight mb-4" data-v-0e01ae69> Urgence 24h/24 </h3><p class="text-xs text-gray-400 mb-6 font-medium" data-v-0e01ae69> Pour toute urgence vitale ou risque d&#39;inondation grave en dehors des heures ouvrées. </p><a href="tel:+237000000000" class="flex items-center justify-center gap-3 w-full py-4 bg-[#E54801] text-white rounded-2xl font-black uppercase tracking-widest hover:bg-[#913327] transition-all" data-v-0e01ae69><i class="fas fa-phone-alt" data-v-0e01ae69></i> Appeler Support </a></div><div class="bg-white rounded-3xl p-6 border border-gray-100 shadow-sm" data-v-0e01ae69><h3 class="text-xs font-black text-[#1B0B38] uppercase tracking-[0.2em] mb-6" data-v-0e01ae69> Que couvrir ? </h3><ul class="space-y-4" data-v-0e01ae69><li class="flex gap-3 text-xs text-gray-500 font-medium leading-relaxed" data-v-0e01ae69><i class="fas fa-check-circle text-green-500 mt-0.5 shrink-0" data-v-0e01ae69></i><span data-v-0e01ae69>Plomberie &amp; Sanitaires</span></li><li class="flex gap-3 text-xs text-gray-500 font-medium leading-relaxed" data-v-0e01ae69><i class="fas fa-check-circle text-green-500 mt-0.5 shrink-0" data-v-0e01ae69></i><span data-v-0e01ae69>Électricité &amp; Éclairage</span></li><li class="flex gap-3 text-xs text-gray-500 font-medium leading-relaxed" data-v-0e01ae69><i class="fas fa-check-circle text-green-500 mt-0.5 shrink-0" data-v-0e01ae69></i><span data-v-0e01ae69>Climatisation &amp; VMC</span></li><li class="flex gap-3 text-xs text-gray-500 font-medium leading-relaxed" data-v-0e01ae69><i class="fas fa-check-circle text-green-500 mt-0.5 shrink-0" data-v-0e01ae69></i><span data-v-0e01ae69>Serrures &amp; Sécurité</span></li></ul></div></div>',1))])])])]))}},Ae=O(Ie,[["__scopeId","data-v-0e01ae69"]]);export{Ae as default};
