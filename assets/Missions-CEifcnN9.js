import{_ as B}from"./index-1P3Q4JPB.js";import{A as k}from"./Sidebar-B_9G7nhg.js";import{D as j,o as l,f as i,h as C,l as E,g as e,s as m,F as b,x as v,t as o,a as M,r as n,y as F,n as u}from"./vendor-DYpG4QdT.js";const T={class:"bg-[#FAF9F5] text-gray-800 antialiased min-h-screen flex relative"},A={class:"flex-1 overflow-y-auto bg-[#FAF9F5] p-4 lg:p-8 transition-all duration-300"},L={class:"max-w-7xl mx-auto h-full"},S={class:"lg:hidden flex items-center justify-between mb-6"},D={class:"flex gap-2 overflow-x-auto pb-4 mb-4 animate-slide-up",style:{"animation-delay":"0.1s"}},V=["onClick"],N={key:0,class:"py-20 text-center text-gray-400"},$={key:1,class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden animate-slide-up",style:{"animation-delay":"0.2s"}},z={class:"overflow-x-auto"},I={class:"w-full text-left border-collapse"},O={class:"divide-y divide-gray-100"},P={class:"px-6 py-4"},q={class:"flex items-center gap-3"},G={class:"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center text-gray-500"},H={class:"font-bold text-[#1B0B38] text-sm"},J={class:"text-xs text-gray-500"},K={class:"px-6 py-4"},Q={class:"text-sm text-gray-700"},R={class:"px-6 py-4"},U={class:"text-sm"},W={class:"text-gray-900 font-medium"},X={class:"text-xs text-gray-500"},Y={class:"px-6 py-4"},Z={class:"px-6 py-4"},ee={class:"flex items-center gap-1"},te={class:"px-6 py-4 border-t border-gray-100 flex items-center justify-between"},se={class:"text-xs text-gray-500"},ae={__name:"Missions",setup(le){const f=n(!0),r=n(!1),c=n("all"),x=n(!0),p=n([]),y=[{label:"Toutes",value:"all"},{label:"En attente",value:"pending"},{label:"Confirmées",value:"confirmed"},{label:"Terminées",value:"completed"}],h=async()=>{x.value=!0;try{const{data:a}=await M.get("/api/agent/missions");a.success&&(p.value=a.data.data.map(t=>{var s,d;return{...t,title:`Visite: ${(s=t.property)==null?void 0:s.title}`,location:((d=t.property)==null?void 0:d.city)||"Cameroun",type:"Visite",date:new Date(t.scheduled_at).toLocaleDateString(),time:new Date(t.scheduled_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),statusLabel:_(t.status),priority:t.status==="pending"?3:2,icon:"fas fa-home"}}))}catch(a){console.error("Erreur chargement missions agent:",a)}finally{x.value=!1}},_=a=>({pending:"En attente",confirmed:"Confirmée",completed:"Terminée",cancelled:"Annulée"})[a]||a;j(h);const g=F(()=>c.value==="all"?p.value:p.value.filter(a=>a.status===c.value)),w=a=>a===3?"bg-red-500":a===2?"bg-orange-500":"bg-green-500";return(a,t)=>(l(),i("div",T,[C(k,{expanded:f.value,"is-open":r.value,onToggleExpand:t[0]||(t[0]=s=>f.value=!f.value)},null,8,["expanded","is-open"]),r.value?(l(),i("div",{key:0,onClick:t[1]||(t[1]=s=>r.value=!1),class:"fixed inset-0 bg-black/50 z-30 backdrop-blur-sm lg:hidden transition-opacity duration-300"})):E("",!0),e("main",A,[e("div",L,[e("div",S,[t[4]||(t[4]=e("h1",{class:"text-xl font-bold text-[#1B0B38]"},"Missions",-1)),e("button",{onClick:t[2]||(t[2]=s=>r.value=!r.value),class:"p-2 text-gray-500 hover:text-[#E54801]"},[...t[3]||(t[3]=[e("i",{class:"fas fa-bars text-xl"},null,-1)])])]),t[9]||(t[9]=m('<div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4 animate-fadeIn" data-v-89feb098><div data-v-89feb098><h1 class="text-2xl font-bold text-[#1B0B38]" data-v-89feb098>Mes Missions</h1><p class="text-gray-500" data-v-89feb098> Gérez vos tâches et objectifs quotidiens </p></div><button class="bg-[#E54801] text-white px-4 py-2 rounded-lg font-medium hover:bg-[#913327] transition flex items-center gap-2 shadow-lg" data-v-89feb098><i class="fas fa-plus" data-v-89feb098></i><span data-v-89feb098>Nouvelle Tâche</span></button></div><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8 animate-slide-up" data-v-89feb098><div class="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex items-center gap-4" data-v-89feb098><div class="w-12 h-12 rounded-xl bg-blue-50 text-blue-600 flex items-center justify-center text-xl" data-v-89feb098><i class="fas fa-clipboard-list" data-v-89feb098></i></div><div data-v-89feb098><p class="text-gray-500 text-xs uppercase font-medium" data-v-89feb098>Total</p><p class="text-2xl font-bold text-[#1B0B38]" data-v-89feb098>12</p></div></div><div class="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex items-center gap-4" data-v-89feb098><div class="w-12 h-12 rounded-xl bg-orange-50 text-orange-600 flex items-center justify-center text-xl" data-v-89feb098><i class="fas fa-spinner" data-v-89feb098></i></div><div data-v-89feb098><p class="text-gray-500 text-xs uppercase font-medium" data-v-89feb098> En cours </p><p class="text-2xl font-bold text-[#1B0B38]" data-v-89feb098>5</p></div></div><div class="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex items-center gap-4" data-v-89feb098><div class="w-12 h-12 rounded-xl bg-green-50 text-green-600 flex items-center justify-center text-xl" data-v-89feb098><i class="fas fa-check-circle" data-v-89feb098></i></div><div data-v-89feb098><p class="text-gray-500 text-xs uppercase font-medium" data-v-89feb098> Terminées </p><p class="text-2xl font-bold text-[#1B0B38]" data-v-89feb098>7</p></div></div><div class="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex items-center gap-4" data-v-89feb098><div class="w-12 h-12 rounded-xl bg-purple-50 text-purple-600 flex items-center justify-center text-xl" data-v-89feb098><i class="fas fa-bullseye" data-v-89feb098></i></div><div data-v-89feb098><p class="text-gray-500 text-xs uppercase font-medium" data-v-89feb098> Objectif Hebdo </p><p class="text-2xl font-bold text-[#1B0B38]" data-v-89feb098>85%</p></div></div></div>',2)),e("div",D,[(l(),i(b,null,v(y,s=>e("button",{key:s.value,onClick:d=>c.value=s.value,class:u(["px-4 py-2 rounded-lg font-medium text-sm whitespace-nowrap transition-colors",c.value===s.value?"bg-[#1B0B38] text-white":"bg-white text-gray-600 hover:bg-gray-100"])},o(s.label),11,V)),64))]),x.value?(l(),i("div",N,[...t[5]||(t[5]=[e("i",{class:"fas fa-circle-notch fa-spin text-3xl mb-4 text-[#E54801]"},null,-1),e("p",{class:"font-bold uppercase text-[10px] tracking-widest"}," Chargement de vos missions... ",-1)])])):(l(),i("div",$,[e("div",z,[e("table",I,[t[7]||(t[7]=e("thead",null,[e("tr",{class:"bg-gray-50 border-b border-gray-100 text-xs uppercase text-gray-500"},[e("th",{class:"px-6 py-4 font-medium"},"Mission"),e("th",{class:"px-6 py-4 font-medium"},"Type"),e("th",{class:"px-6 py-4 font-medium"},"Date / Échéance"),e("th",{class:"px-6 py-4 font-medium"},"Statut"),e("th",{class:"px-6 py-4 font-medium"},"Priorité"),e("th",{class:"px-6 py-4 font-medium text-right"},"Actions")])],-1)),e("tbody",O,[(l(!0),i(b,null,v(g.value,s=>(l(),i("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors group"},[e("td",P,[e("div",q,[e("div",G,[e("i",{class:u(s.icon)},null,2)]),e("div",null,[e("p",H,o(s.title),1),e("p",J,o(s.location),1)])])]),e("td",K,[e("span",Q,o(s.type),1)]),e("td",R,[e("div",U,[e("p",W,o(s.date),1),e("p",X,o(s.time),1)])]),e("td",Y,[e("span",{class:u(["px-3 py-1 rounded-full text-xs font-medium",s.status==="pending"?"bg-orange-50 text-orange-600":s.status==="confirmed"?"bg-blue-50 text-blue-600":"bg-green-50 text-green-600"])},o(s.statusLabel),3)]),e("td",Z,[e("div",ee,[(l(),i(b,null,v(3,d=>e("div",{key:d,class:u(["w-2 h-2 rounded-full",d<=s.priority?w(s.priority):"bg-gray-200"])},null,2)),64))])]),t[6]||(t[6]=e("td",{class:"px-6 py-4 text-right"},[e("button",{class:"text-gray-400 hover:text-[#E54801] p-2 transition-colors"},[e("i",{class:"fas fa-ellipsis-v"})])],-1))]))),128))])])]),e("div",te,[e("p",se," Affichage de 1 à "+o(g.value.length)+" sur 12 missions ",1),t[8]||(t[8]=m('<div class="flex gap-2" data-v-89feb098><button class="w-8 h-8 rounded-lg border border-gray-200 flex items-center justify-center text-gray-500 hover:bg-gray-50 disabled:opacity-50" disabled data-v-89feb098><i class="fas fa-chevron-left" data-v-89feb098></i></button><button class="w-8 h-8 rounded-lg border border-gray-200 flex items-center justify-center text-gray-500 hover:bg-gray-50" data-v-89feb098><i class="fas fa-chevron-right" data-v-89feb098></i></button></div>',1))])]))])])]))}},re=B(ae,[["__scopeId","data-v-89feb098"]]);export{re as default};
