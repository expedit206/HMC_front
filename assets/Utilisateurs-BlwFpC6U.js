import{D,o as n,f as o,h as S,l as m,g as e,F as _,x as w,m as T,v as P,t as r,n as u,a as k,r as i}from"./vendor-DYpG4QdT.js";import{_ as I}from"./index-1P3Q4JPB.js";import{A as L}from"./Sidebar-BSJmib4c.js";const V={class:"bg-[#F8F9FB] min-h-screen text-gray-800 antialiased flex"},$={class:"flex-1 flex flex-col h-screen overflow-hidden lg:ml-0 transition-all duration-300"},z={class:"bg-white border-b border-gray-100 flex items-center justify-between px-8 h-20 shrink-0 sticky top-0 z-30 shadow-sm"},N={class:"flex items-center gap-6"},R={class:"flex-1 overflow-y-auto p-8 bg-[#F8F9FB]"},M={key:0,class:"flex flex-col items-center justify-center h-full min-h-[60vh]"},G={key:1,class:"max-w-7xl mx-auto"},O={class:"flex flex-col md:flex-row justify-between gap-4 mb-8"},Q={class:"flex flex-wrap gap-2"},q=["onClick"],H={class:"relative"},J={class:"bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden min-h-[400px]"},K={class:"w-full text-left"},W={class:"divide-y divide-gray-50"},X={class:"px-6 py-5"},Y={class:"flex items-center gap-4"},Z={class:"w-10 h-10 rounded-full bg-[#1B0B38] text-white flex items-center justify-center font-black text-xs shadow-md"},ee={class:"flex flex-col"},te={class:"text-sm font-black text-[#1B0B38]"},se={class:"text-[10px] text-gray-400 font-bold tracking-tight"},ae={class:"px-6 py-5"},le={class:"px-6 py-5"},ne={class:"flex items-center justify-center gap-2"},oe=["onChange"],re=["selected"],ie=["selected"],ce=["selected"],de={class:"px-6 py-5 text-xs text-gray-400 font-medium"},ue={key:0,class:"p-20 text-center flex flex-col items-center gap-4"},xe={class:"mt-8 flex justify-between items-center bg-white p-4 rounded-2xl border border-gray-100"},pe={class:"text-xs text-gray-400 font-bold"},ge={class:"flex gap-2"},fe=["disabled"],ve={class:"w-8 h-8 flex items-center justify-center text-xs font-black text-[#1B0B38]"},be=["disabled"],he={__name:"Utilisateurs",setup(ye){const c=i(!1),g=i(!0),f=i([]),b=i(0),a=i(1),x=i(1),v=i(""),p=i("all");let h=null;const B=[{label:"Tous",value:"all"},{label:"Bailleurs",value:"bailleur"},{label:"Locataires",value:"locataire"},{label:"Prestataires",value:"prestataire"},{label:"Agents",value:"agent"},{label:"Admins",value:"admin"}],d=async()=>{g.value=!0;try{const l={page:a.value,search:v.value};p.value!=="all"&&(l.role=p.value);const{data:t}=await k.get("/api/admin/users",{params:l});t.success&&(f.value=t.data.data,b.value=t.data.total,x.value=t.data.last_page)}catch(l){console.error("Erreur chargement utilisateurs:",l)}finally{g.value=!1}},j=()=>{clearTimeout(h),h=setTimeout(()=>{a.value=1,d()},500)},C=l=>{p.value=l,a.value=1,d()},F=async(l,t)=>{try{const{data:s}=await k.put(`/api/admin/users/${l.id}`,{status:t});s.success&&(l.status=t)}catch(s){console.error("Erreur mise à jour statut:",s)}},E=()=>{a.value>1&&(a.value--,d())},A=()=>{a.value<x.value&&(a.value++,d())},U=l=>new Date(l).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"});return D(d),(l,t)=>(n(),o("div",V,[S(L,{"is-open":c.value},null,8,["is-open"]),c.value?(n(),o("div",{key:0,onClick:t[0]||(t[0]=s=>c.value=!1),class:"fixed inset-0 bg-black/50 z-40 backdrop-blur-sm lg:hidden transition-opacity duration-300"})):m("",!0),e("div",$,[e("header",z,[e("div",N,[e("button",{onClick:t[1]||(t[1]=s=>c.value=!c.value),class:"w-10 h-10 rounded-xl bg-gray-50 flex items-center justify-center text-gray-400 hover:text-[#913327] transition-all lg:hidden"},[...t[3]||(t[3]=[e("i",{class:"fas fa-bars"},null,-1)])]),t[4]||(t[4]=e("h2",{class:"text-sm font-black text-[#1B0B38] uppercase tracking-tight hidden sm:block"}," Gestion des Utilisateurs ",-1))])]),e("main",R,[g.value?(n(),o("div",M,[...t[5]||(t[5]=[e("div",{class:"w-16 h-16 border-4 border-[#E54801] border-t-transparent rounded-full animate-spin mb-4"},null,-1),e("p",{class:"text-gray-500 font-bold uppercase tracking-widest text-xs"}," Chargement de la base de données... ",-1)])])):(n(),o("div",G,[e("div",O,[e("div",Q,[(n(),o(_,null,w(B,s=>e("button",{key:s.value,onClick:y=>C(s.value),class:u(["px-4 py-2 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all",p.value===s.value?"bg-[#1B0B38] text-white":"bg-white text-gray-400 border border-gray-100 hover:border-gray-300"])},r(s.label),11,q)),64))]),e("div",H,[t[6]||(t[6]=e("i",{class:"fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-300"},null,-1)),T(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>v.value=s),onInput:j,type:"text",placeholder:"Rechercher par nom, email...",class:"pl-12 pr-6 py-3 bg-white border border-gray-100 rounded-xl text-sm w-full md:w-80 focus:ring-2 focus:ring-[#E54801]/10 focus:outline-none transition-all"},null,544),[[P,v.value]])])]),e("div",J,[e("table",K,[t[8]||(t[8]=e("thead",{class:"bg-gray-50/50 text-[10px] font-black uppercase text-gray-400 border-b border-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-5 tracking-widest"},"Utilisateur"),e("th",{class:"px-6 py-5 tracking-widest"},"Rôle principal"),e("th",{class:"px-6 py-5 tracking-widest text-center"},"Statut"),e("th",{class:"px-6 py-5 tracking-widest"},"Inscrit le"),e("th",{class:"px-6 py-5 tracking-widest text-right"},"Actions")])],-1)),e("tbody",W,[(n(!0),o(_,null,w(f.value,s=>(n(),o("tr",{key:s.id,class:"hover:bg-gray-50/50 transition-all group"},[e("td",X,[e("div",Y,[e("div",Z,r(s.name.charAt(0).toUpperCase()),1),e("div",ee,[e("span",te,r(s.name),1),e("span",se,r(s.email),1)])])]),e("td",ae,[e("span",{class:u(["px-2 py-0.5 text-[8px] font-black uppercase rounded-md",s.role==="admin"?"bg-red-100 text-red-600":s.role==="bailleur"?"bg-orange-100 text-[#E54801]":s.role==="agent"?"bg-green-100 text-green-600":"bg-blue-100 text-blue-600"])},r(s.role),3)]),e("td",le,[e("div",ne,[e("select",{onChange:y=>F(s,y.target.value),class:u(["text-[10px] font-bold border-none bg-transparent focus:ring-0 cursor-pointer",s.status==="inactive"?"text-red-500":"text-green-500"])},[e("option",{value:"active",selected:s.status==="active"}," Actif ",8,re),e("option",{value:"inactive",selected:s.status==="inactive"}," Inactif ",8,ie),e("option",{value:"pending",selected:s.status==="pending"}," En attente ",8,ce)],42,oe)])]),e("td",de,r(U(s.created_at)),1),t[7]||(t[7]=e("td",{class:"px-6 py-5 text-right"},[e("div",{class:"flex gap-2 justify-end opacity-0 group-hover:opacity-100 transition-opacity"},[e("button",{class:"w-9 h-9 rounded-xl bg-gray-50 text-gray-400 hover:text-[#E54801] hover:bg-white border border-transparent hover:border-gray-100 transition-all"},[e("i",{class:"fas fa-eye text-xs"})])])],-1))]))),128))])]),f.value.length===0?(n(),o("div",ue,[...t[9]||(t[9]=[e("div",{class:"w-20 h-20 bg-gray-50 rounded-full flex items-center justify-center text-gray-300 text-3xl"},[e("i",{class:"fas fa-user-slash"})],-1),e("p",{class:"text-gray-400 font-bold uppercase tracking-widest text-sm"}," Aucun utilisateur trouvé ",-1)])])):m("",!0)]),e("div",xe,[e("span",pe,"Total: "+r(b.value)+" utilisateurs",1),e("div",ge,[e("button",{onClick:E,disabled:a.value===1,class:u(["w-8 h-8 rounded-lg flex items-center justify-center transition-all",a.value===1?"text-gray-200":"hover:bg-orange-50 text-[#E54801]"])},[...t[10]||(t[10]=[e("i",{class:"fas fa-chevron-left text-xs"},null,-1)])],10,fe),e("span",ve,r(a.value),1),e("button",{onClick:A,disabled:a.value>=x.value,class:u(["w-8 h-8 rounded-lg flex items-center justify-center transition-all",a.value>=x.value?"text-gray-200":"hover:bg-orange-50 text-[#E54801]"])},[...t[11]||(t[11]=[e("i",{class:"fas fa-chevron-right text-xs"},null,-1)])],10,be)])])]))])])]))}},ke=I(he,[["__scopeId","data-v-81f68511"]]);export{ke as default};
