import{_ as I}from"./index-1P3Q4JPB.js";import{B as $}from"./Sidebar-CVjNu7-1.js";import{D as S,o as l,f as r,h as j,l as i,g as e,k as f,F as A,x as F,a as E,r as d,n as c,t as n}from"./vendor-DYpG4QdT.js";const L={class:"bg-[#FAF9F5] text-gray-800 antialiased min-h-screen flex relative"},M={class:"flex-1 p-6 lg:p-10 overflow-y-auto transition-all duration-300"},N={class:"max-w-5xl mx-auto"},q={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-10 gap-4 animate-fadeIn"},D={class:"flex items-center gap-3"},T={class:"space-y-6 animate-fadeIn",style:{"animation-delay":"0.1s"}},V={key:0,class:"py-20 text-center text-gray-400"},z={key:1,class:"py-20 text-center bg-white rounded-[2rem] border border-gray-100 shadow-sm"},G={class:"flex-1"},R={class:"flex items-center gap-3 mb-2 flex-wrap"},U={class:"text-lg font-black text-[#1B0B38]"},O={class:"text-xs text-gray-500 mb-4 font-medium flex items-center gap-1"},P={key:0,class:"text-sm text-gray-600 mb-6 italic line-clamp-2"},H={class:"flex items-center gap-2"},J={class:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-[10px] font-black"},K={class:"text-[10px] text-[#1B0B38] font-black uppercase tracking-tight"},Q={class:"flex flex-col justify-end items-end gap-3 min-w-[180px] w-full md:w-auto"},W={key:0,class:"flex flex-col gap-2 w-full"},X=["onClick"],Y=["onClick"],Z=["onClick"],ee={key:1,class:"w-full py-2.5 border border-gray-100 text-gray-400 text-[9px] font-black uppercase tracking-widest rounded-xl cursor-not-allowed"},te={__name:"Interventions",setup(se){const u=d(!0),o=d(!1),p=d([]),x=d(!0),m=async()=>{x.value=!0;try{const{data:a}=await E.get("/api/bailleur/interventions");a.success&&(p.value=a.data)}catch(a){console.error("Erreur chargement interventions:",a)}finally{x.value=!1}},g=async(a,s)=>{try{const{data:t}=await E.post(`/api/bailleur/interventions/${a}/status`,{status:s});t.success&&await m()}catch(t){console.error("Erreur status intervention:",t),alert("Une erreur est survenue lors de la mise à jour du statut.")}};S(m);const C=a=>({pending:"En attente",in_progress:"En cours",completed:"Terminé",cancelled:"Annulé"})[a]||a,b=a=>({pending:"bg-orange-100 text-orange-600",in_progress:"bg-blue-100 text-blue-600",completed:"bg-green-100 text-green-600",cancelled:"bg-gray-100 text-gray-600"})[a]||"bg-gray-100";return(a,s)=>(l(),r("div",L,[j($,{expanded:u.value,"is-open":o.value,onToggleExpand:s[0]||(s[0]=t=>u.value=!u.value)},null,8,["expanded","is-open"]),o.value?(l(),r("div",{key:0,onClick:s[1]||(s[1]=t=>o.value=!1),class:"fixed inset-0 bg-black/50 z-30 backdrop-blur-sm lg:hidden transition-opacity duration-300"})):i("",!0),e("main",M,[e("div",N,[e("div",q,[s[5]||(s[5]=e("div",null,[e("h1",{class:"text-3xl font-black text-[#1B0B38] leading-tight"},[f(" Gestion des "),e("span",{class:"text-[#E54801]"},"Interventions")]),e("p",{class:"text-gray-500 font-medium font-bold uppercase text-[10px] tracking-widest mt-1"}," Maintenance et Réparations en cours ")],-1)),e("div",D,[e("button",{onClick:s[2]||(s[2]=t=>o.value=!o.value),class:"lg:hidden p-2 text-gray-500 hover:text-[#E54801] transition-colors"},[...s[3]||(s[3]=[e("i",{class:"fas fa-bars text-xl"},null,-1)])]),s[4]||(s[4]=e("button",{class:"px-6 py-3 bg-[#E54801] text-white text-xs font-black uppercase tracking-widest rounded-xl hover:shadow-lg transition-all shadow-md flex items-center gap-2"},[e("i",{class:"fas fa-plus"}),f(" Nouvelle demande ")],-1))])]),e("div",T,[x.value?(l(),r("div",V,[...s[6]||(s[6]=[e("i",{class:"fas fa-circle-notch fa-spin text-3xl mb-4 text-[#E54801]"},null,-1),e("p",{class:"font-bold uppercase text-[10px] tracking-widest"}," Récupération des interventions... ",-1)])])):p.value.length===0?(l(),r("div",z,[...s[7]||(s[7]=[e("i",{class:"fas fa-tools text-5xl mb-4 text-gray-200"},null,-1),e("p",{class:"text-gray-500 font-bold"}," Aucune intervention signalée pour le moment. ",-1)])])):(l(!0),r(A,{key:2},F(p.value,t=>{var y,v,k,_,h,w;return l(),r("div",{key:t.id,class:c(["bg-white p-6 md:p-8 rounded-[2rem] shadow-sm border border-gray-100 flex flex-col md:flex-row gap-6 md:gap-8 relative overflow-hidden group hover:shadow-lg transition-all",{"border-l-[6px] border-[#E54801]":t.status==="pending"}])},[e("div",{class:c(["w-16 h-16 rounded-2xl flex items-center justify-center text-2xl shrink-0 group-hover:scale-110 transition-transform",b(t.status)])},[e("i",{class:c(((y=t.service)==null?void 0:y.icon)||"fas fa-wrench")},null,2)],2),e("div",G,[e("div",R,[e("h3",U,n(((v=t.service)==null?void 0:v.name)||"Intervention Générale"),1),e("span",{class:c(["px-3 py-1 text-[9px] font-black uppercase tracking-widest rounded-full",b(t.status)])},n(C(t.status)),3)]),e("p",O,[s[8]||(s[8]=e("i",{class:"fas fa-map-marker-alt"},null,-1)),f(" "+n((k=t.property)==null?void 0:k.title)+" • "+n(new Date(t.created_at).toLocaleDateString()),1)]),t.notes?(l(),r("p",P,' "'+n(t.notes)+'" ',1)):i("",!0),e("div",H,[e("div",J,n(((h=(_=t.requester)==null?void 0:_.name)==null?void 0:h[0])||"?"),1),e("span",K," Par: "+n(((w=t.requester)==null?void 0:w.name)||"Locataire"),1)])]),e("div",Q,[t.status!=="completed"&&t.status!=="cancelled"?(l(),r("div",W,[t.status==="pending"?(l(),r("button",{key:0,onClick:B=>g(t.id,"in_progress"),class:"w-full py-2.5 bg-[#1B0B38] text-white text-[9px] font-black uppercase tracking-widest rounded-xl hover:bg-[#E54801] transition-all"}," Marquer en cours ",8,X)):i("",!0),t.status==="in_progress"?(l(),r("button",{key:1,onClick:B=>g(t.id,"completed"),class:"w-full py-2.5 bg-green-600 text-white text-[9px] font-black uppercase tracking-widest rounded-xl hover:bg-green-700 transition-all"}," Marquer terminé ",8,Y)):i("",!0),e("button",{onClick:B=>g(t.id,"cancelled"),class:"w-full py-2.5 border border-gray-100 text-gray-400 text-[9px] font-black uppercase tracking-widest rounded-xl hover:bg-gray-50 transition-all"}," Annuler ",8,Z)])):(l(),r("button",ee,n(t.status==="completed"?"Traitée":"Annulée"),1))])],2)}),128))])])])]))}},ne=I(te,[["__scopeId","data-v-bae66312"]]);export{ne as default};
