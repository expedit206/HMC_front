import{D as F,o,f as i,h as l,l as w,g as e,i as x,u as f,j as g,s as V,F as m,x as _,a as k,r as d,k as v,n as y,t as r}from"./vendor-DYpG4QdT.js";import{_ as j}from"./index-D7Lj447K.js";import{B as C}from"./Sidebar-DVFQKAUN.js";const L={class:"bg-[#FAF9F5] text-gray-800 antialiased min-h-screen flex relative"},$={class:"flex-1 overflow-y-auto bg-[#FAF9F5] p-4 lg:p-8 transition-all duration-300"},z={class:"max-w-6xl mx-auto"},I={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4 animate-fadeIn"},M={class:"flex items-center gap-3"},N={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-fadeIn",style:{"animation-delay":"0.2s"}},A={key:0,class:"col-span-full py-20 text-center bg-white rounded-2xl border border-gray-100 shadow-sm"},S={class:"relative h-48 overflow-hidden"},D=["src","alt"],T={class:"absolute top-4 left-4 flex gap-2"},P={class:"p-5"},R={class:"flex justify-between items-start mb-2"},U={class:"font-bold text-gray-900 group-hover:text-[#E54801] transition-colors line-clamp-1"},G={class:"text-xs text-gray-500 mb-4 flex items-center gap-1 line-clamp-1"},O={class:"grid grid-cols-3 gap-4 border-y border-gray-50 py-4 mb-4"},W={class:"text-center"},q={class:"text-[10px] font-bold text-[#1B0B38] whitespace-nowrap"},H={class:"text-center border-x border-gray-50"},J={class:"text-center"},K={class:"text-[10px] font-bold text-[#1B0B38]"},Q={class:"flex gap-2"},X=["onClick"],Y={__name:"MesBiens",setup(Z){const u=d(!0),n=d(!1),b=d([]),c=d(!0),h=async()=>{c.value=!0;try{const{data:a}=await k.get("/api/bailleur/properties");a.success&&(b.value=a.data.data.map(t=>{var p;let s="/images/placeholder-property.jpg";return t.primary_image&&(s=t.primary_image.path.startsWith("http")?t.primary_image.path:`/storage/${t.primary_image.path}`),{...t,image:s,status:t.rental_status==="available"?"vacant":"occupied",tenant:((p=t.tenant)==null?void 0:p.name)||null,visits:t.visits_count||0}}))}catch(a){console.error("Erreur chargement biens bailleur:",a)}finally{c.value=!1}},B=async a=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce bien ? Cette action est irréversible."))try{const{data:t}=await k.delete(`/api/properties/${a}`);t.success&&(alert("Bien supprimé avec succès."),await h())}catch(t){console.error("Erreur suppression bien:",t),alert("Une erreur est survenue lors de la suppression.")}};F(h);const E=a=>new Intl.NumberFormat("fr-FR").format(a||0);return(a,t)=>(o(),i("div",L,[l(C,{expanded:u.value,"is-open":n.value,onToggleExpand:t[0]||(t[0]=s=>u.value=!u.value)},null,8,["expanded","is-open"]),n.value?(o(),i("div",{key:0,onClick:t[1]||(t[1]=s=>n.value=!1),class:"fixed inset-0 bg-black/50 z-30 backdrop-blur-sm lg:hidden transition-opacity duration-300"})):w("",!0),e("main",$,[e("div",z,[e("div",I,[t[5]||(t[5]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 leading-tight"}," Mes Biens Immobiliers "),e("p",{class:"text-gray-500 text-sm mt-1"}," Gérez vos propriétés, suivez les disponibilités et mettez à jour les annonces. ")],-1)),e("div",M,[e("button",{onClick:t[2]||(t[2]=s=>n.value=!n.value),class:"lg:hidden p-2 text-gray-500 hover:text-[#E54801] transition-colors"},[...t[3]||(t[3]=[e("i",{class:"fas fa-bars text-xl"},null,-1)])]),l(f(g),{to:"/bailleur/publier-bien",class:"px-6 py-3 bg-[#E54801] text-white rounded-xl text-sm font-bold hover:shadow-lg transition-all flex items-center gap-2"},{default:x(()=>[...t[4]||(t[4]=[e("i",{class:"fas fa-plus"},null,-1),e("span",{class:"hidden sm:inline"},"Ajouter un Bien",-1)])]),_:1})])]),t[17]||(t[17]=V('<div class="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 mb-8 flex flex-wrap gap-4 items-center animate-fadeIn" style="animation-delay:0.1s;" data-v-945b3bbf><div class="flex-1 min-w-[200px] relative" data-v-945b3bbf><i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-400" data-v-945b3bbf></i><input type="text" placeholder="Rechercher par nom ou adresse..." class="w-full pl-10 pr-4 py-2.5 bg-gray-50 border-none rounded-xl text-sm focus:ring-2 focus:ring-[#E54801]/20 outline-none transition-all" data-v-945b3bbf></div><select class="bg-gray-50 border-none rounded-xl text-sm py-2.5 px-4 focus:ring-2 focus:ring-[#E54801]/20 outline-none cursor-pointer hover:bg-gray-100 transition-colors" data-v-945b3bbf><option data-v-945b3bbf>Tous les types</option><option data-v-945b3bbf>Villa</option><option data-v-945b3bbf>Appartement</option><option data-v-945b3bbf>Studio</option></select><select class="bg-gray-50 border-none rounded-xl text-sm py-2.5 px-4 focus:ring-2 focus:ring-[#E54801]/20 outline-none cursor-pointer hover:bg-gray-100 transition-colors" data-v-945b3bbf><option data-v-945b3bbf>Tous les statuts</option><option data-v-945b3bbf>Loué</option><option data-v-945b3bbf>Vacant</option></select></div>',1)),e("div",N,[c.value?(o(),i(m,{key:0},_(3,s=>e("div",{key:s,class:"bg-white rounded-2xl h-80 sk"})),64)):(o(),i(m,{key:1},[b.value.length===0?(o(),i("div",A,[t[7]||(t[7]=e("i",{class:"fas fa-building text-5xl mb-4 text-gray-200"},null,-1)),t[8]||(t[8]=e("p",{class:"text-gray-500 font-bold"}," Vous n'avez pas encore publi de bien. ",-1)),l(f(g),{to:"/bailleur/publier-bien",class:"text-[#E54801] font-bold mt-2 inline-block hover:underline"},{default:x(()=>[...t[6]||(t[6]=[v(" Publier mon premier bien ",-1)])]),_:1})])):w("",!0),(o(!0),i(m,null,_(b.value,s=>(o(),i("div",{key:s.id,class:y(["bg-white rounded-2xl overflow-hidden shadow-sm border border-gray-100 hover:shadow-md transition-all group",{"border-l-4 border-l-[#E54801]":s.status==="vacant"}])},[e("div",S,[e("img",{src:s.image,alt:s.title,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"},null,8,D),e("div",T,[e("span",{class:y(["px-2 py-1 text-white text-[10px] font-bold rounded-lg uppercase tracking-wider",s.status==="vacant"?"bg-[#E54801]":"bg-green-500"])},r(s.status==="vacant"?"Vacant":"Loué"),3)])]),e("div",P,[e("div",R,[e("h3",U,r(s.title),1),t[9]||(t[9]=e("button",{class:"text-gray-400 hover:text-[#E54801] transition-colors"},[e("i",{class:"fas fa-ellipsis-h"})],-1))]),e("p",G,[t[10]||(t[10]=e("i",{class:"fas fa-map-marker-alt text-[#E54801]"},null,-1)),v(" "+r(s.location),1)]),e("div",O,[e("div",W,[t[11]||(t[11]=e("p",{class:"text-[10px] text-gray-400 uppercase font-bold tracking-wider"}," Loyer ",-1)),e("p",q,r(E(s.monthly_rent||s.price)),1)]),e("div",H,[t[12]||(t[12]=e("p",{class:"text-[10px] text-gray-400 uppercase font-bold tracking-wider"}," Locataire ",-1)),e("p",{class:y(["text-[10px] font-medium",s.tenant?"text-[#1B0B38] font-bold":"text-gray-400 italic"])},r(s.tenant||"Aucun"),3)]),e("div",J,[t[13]||(t[13]=e("p",{class:"text-[10px] text-gray-400 uppercase font-bold tracking-wider"}," Visites ",-1)),e("p",K,r(s.visits),1)])]),e("div",Q,[l(f(g),{to:`/biens/${s.id}`,class:"flex-1 py-3 rounded-xl bg-gray-50 text-[#1B0B38] text-[10px] font-black hover:bg-gray-100 transition-all uppercase tracking-widest text-center"},{default:x(()=>[...t[14]||(t[14]=[v(" Détails ",-1)])]),_:1},8,["to"]),t[16]||(t[16]=e("button",{class:"flex-1 py-3 rounded-xl bg-[#1B0B38] text-white text-[10px] font-black hover:bg-[#E54801] transition-all uppercase tracking-widest shadow-sm"}," Modifier ",-1)),e("button",{onClick:p=>B(s.id),class:"w-10 h-10 flex items-center justify-center rounded-xl border border-gray-100 text-gray-400 hover:text-red-500 hover:bg-red-50 transition-all shadow-sm",title:"Supprimer"},[...t[15]||(t[15]=[e("i",{class:"fas fa-trash-alt"},null,-1)])],8,X)])])],2))),128))],64))])])])]))}},at=j(Y,[["__scopeId","data-v-945b3bbf"]]);export{at as default};
