import{_ as j}from"./index-1P3Q4JPB.js";import{B as $}from"./Sidebar-CVjNu7-1.js";import{D,o as n,f as l,h as F,l as S,g as e,k as i,F as T,x as L,a as C,r as c,n as g,t as o}from"./vendor-DYpG4QdT.js";const A={class:"bg-[#FAF9F5] text-gray-800 antialiased min-h-screen flex relative"},N={class:"flex-1 p-6 lg:p-10 overflow-y-auto transition-all duration-300"},R={class:"max-w-5xl mx-auto"},z={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-10 gap-4 animate-fadeIn"},I={class:"flex items-center gap-3"},M={class:"space-y-6 animate-fadeIn",style:{"animation-delay":"0.1s"}},U={key:0,class:"py-20 text-center text-gray-400"},q={key:1,class:"py-20 text-center bg-white rounded-[2rem] border border-gray-100 shadow-sm"},G={class:"flex-1"},O={class:"flex items-center gap-3 mb-2 flex-wrap"},P={class:"text-lg font-black text-[#1B0B38]"},H={class:"text-xs text-gray-500 mb-4 font-medium flex items-center gap-2"},J={class:"font-black text-[#1B0B38]"},K={class:"flex items-center gap-3 bg-gray-50 p-3 rounded-2xl inline-flex"},Q={class:"w-8 h-8 rounded-full bg-[#1B0B38] text-white flex items-center justify-center text-[10px] font-black"},W={class:"flex flex-col"},X={class:"text-[10px] text-[#1B0B38] font-black uppercase tracking-tight"},Y={class:"text-[9px] text-gray-400 font-medium"},Z={class:"flex flex-col justify-end items-end gap-3 min-w-[180px] w-full md:w-auto"},ee={key:0,class:"flex flex-col gap-2 w-full"},te=["onClick"],se=["onClick"],ae={key:1,class:"w-full flex flex-col gap-2"},ne=["onClick"],le=["onClick"],oe={key:2,class:"text-[10px] font-black text-gray-300 uppercase italic"},re={__name:"Visites",setup(ie){const u=c(!0),r=c(!1),p=c([]),f=c(!0),m=async()=>{f.value=!0;try{const{data:a}=await C.get("/api/bailleur/visits");a.success&&(p.value=a.data)}catch(a){console.error("Erreur chargement visites:",a)}finally{f.value=!1}},d=async(a,t)=>{try{const{data:s}=await C.post(`/api/bailleur/visits/${a}/status`,{status:t});s.success&&(alert("Statut de la visite mis à jour !"),await m())}catch(s){console.error("Erreur status visite:",s),alert("Une erreur est survenue.")}};D(m);const B=a=>({pending:"En attente",confirmed:"Confirmée",completed:"Terminée",cancelled:"Annulée"})[a]||a,b=a=>({pending:"bg-orange-100 text-orange-600",confirmed:"bg-blue-100 text-blue-600",completed:"bg-green-100 text-green-600",cancelled:"bg-gray-100 text-gray-600"})[a]||"bg-gray-100",E=a=>a?new Date(a).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"",V=a=>a?new Date(a).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):"";return(a,t)=>(n(),l("div",A,[F($,{expanded:u.value,"is-open":r.value,onToggleExpand:t[0]||(t[0]=s=>u.value=!u.value)},null,8,["expanded","is-open"]),r.value?(n(),l("div",{key:0,onClick:t[1]||(t[1]=s=>r.value=!1),class:"fixed inset-0 bg-black/50 z-30 backdrop-blur-sm lg:hidden transition-opacity duration-300"})):S("",!0),e("main",N,[e("div",R,[e("div",z,[t[4]||(t[4]=e("div",null,[e("h1",{class:"text-3xl font-black text-[#1B0B38] leading-tight"},[i(" Gestion des "),e("span",{class:"text-[#E54801]"},"Visites")]),e("p",{class:"text-gray-500 font-medium font-bold uppercase text-[10px] tracking-widest mt-1"}," Demandes de rendez-vous sur vos propriétés ")],-1)),e("div",I,[e("button",{onClick:t[2]||(t[2]=s=>r.value=!r.value),class:"lg:hidden p-2 text-gray-500 hover:text-[#E54801] transition-colors"},[...t[3]||(t[3]=[e("i",{class:"fas fa-bars text-xl"},null,-1)])])])]),e("div",M,[f.value?(n(),l("div",U,[...t[5]||(t[5]=[e("i",{class:"fas fa-circle-notch fa-spin text-3xl mb-4 text-[#E54801]"},null,-1),e("p",{class:"font-bold uppercase text-[10px] tracking-widest"}," Récupération des visites... ",-1)])])):p.value.length===0?(n(),l("div",q,[...t[6]||(t[6]=[e("i",{class:"fas fa-calendar-times text-5xl mb-4 text-gray-200"},null,-1),e("p",{class:"text-gray-500 font-bold"}," Aucune demande de visite enregistrée. ",-1)])])):(n(!0),l(T,{key:2},L(p.value,s=>{var y,v,k,h,_,w;return n(),l("div",{key:s.id,class:g(["bg-white p-6 md:p-8 rounded-[2rem] shadow-sm border border-gray-100 flex flex-col md:flex-row gap-6 md:gap-8 relative overflow-hidden group hover:shadow-lg transition-all",{"border-l-[6px] border-[#E54801]":s.status==="pending"}])},[e("div",{class:g(["w-16 h-16 rounded-2xl flex items-center justify-center text-2xl shrink-0 group-hover:scale-110 transition-transform",b(s.status)])},[...t[7]||(t[7]=[e("i",{class:"fas fa-calendar-check"},null,-1)])],2),e("div",G,[e("div",O,[e("h3",P,o((y=s.property)==null?void 0:y.title),1),e("span",{class:g(["px-3 py-1 text-[9px] font-black uppercase tracking-widest rounded-full",b(s.status)])},o(B(s.status)),3)]),e("p",H,[t[8]||(t[8]=e("i",{class:"fas fa-clock text-[#E54801]"},null,-1)),e("span",J,o(E(s.scheduled_at)),1),i(" à "+o(V(s.scheduled_at)),1)]),e("div",K,[e("div",Q,o(((h=(k=(v=s.visitor)==null?void 0:v.name)==null?void 0:k[0])==null?void 0:h.toUpperCase())||"?"),1),e("div",W,[e("span",X,o(((_=s.visitor)==null?void 0:_.name)||"Visiteur anonyme"),1),e("span",Y,o(((w=s.visitor)==null?void 0:w.phone)||"Pas de numéro"),1)])])]),e("div",Z,[s.status==="pending"?(n(),l("div",ee,[e("button",{onClick:x=>d(s.id,"confirmed"),class:"w-full py-2.5 bg-[#E54801] text-white text-[9px] font-black uppercase tracking-widest rounded-xl hover:shadow-md transition-all flex items-center justify-center gap-2"},[...t[9]||(t[9]=[e("i",{class:"fas fa-check"},null,-1),i(" Confirmer ",-1)])],8,te),e("button",{onClick:x=>d(s.id,"cancelled"),class:"w-full py-2.5 border border-gray-100 text-gray-400 text-[9px] font-black uppercase tracking-widest rounded-xl hover:bg-gray-50 transition-all flex items-center justify-center gap-2"},[...t[10]||(t[10]=[e("i",{class:"fas fa-times"},null,-1),i(" Rejeter ",-1)])],8,se)])):s.status==="confirmed"?(n(),l("div",ae,[e("button",{onClick:x=>d(s.id,"completed"),class:"w-full py-2.5 bg-green-600 text-white text-[9px] font-black uppercase tracking-widest rounded-xl hover:bg-green-700 transition-all flex items-center justify-center gap-2"},[...t[11]||(t[11]=[e("i",{class:"fas fa-check-double"},null,-1),i(" Marquer Terminée ",-1)])],8,ne),e("button",{onClick:x=>d(s.id,"cancelled"),class:"w-full py-2.5 border border-gray-100 text-gray-400 text-[9px] font-black uppercase tracking-widest rounded-xl hover:bg-gray-50 transition-all"}," Annuler ",8,le)])):(n(),l("div",oe," Visite "+o(s.status==="completed"?"effectuée":"annulée"),1))])],2)}),128))])])])]))}},pe=j(re,[["__scopeId","data-v-c7f8160e"]]);export{pe as default};
