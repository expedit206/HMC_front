import{D as V,o as a,f as n,h as v,l as u,g as e,i as I,u as F,j as A,k as o,t as i,F as D,x as T,a as q,r as f,y as $,n as p}from"./vendor-DYpG4QdT.js";import{_ as L}from"./index-D7Lj447K.js";import{P as R}from"./Sidebar-CAEG3rJj.js";const M={class:"bg-[#FAF9F5] text-gray-800 antialiased min-h-screen flex relative"},G={class:"flex-1 overflow-y-auto bg-[#FAF9F5] p-4 lg:p-8 transition-all duration-300"},O={key:0,class:"flex flex-col items-center justify-center h-full min-h-[60vh]"},H={key:1,class:"max-w-7xl mx-auto"},J={class:"lg:hidden flex items-center justify-between mb-6"},K={class:"mb-8 animate-fadeIn"},Q={class:"flex items-center gap-2 text-sm text-gray-400 mb-4"},U={class:"flex flex-col lg:flex-row lg:items-center justify-between gap-4"},W={class:"flex items-center gap-3"},X={class:"status-badge bg-blue-100 text-blue-700"},Y={class:"status-badge bg-green-100 text-green-700"},Z={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8 animate-fadeIn",style:{"animation-delay":"0.1s"}},ee={class:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100"},te={class:"flex items-center justify-between"},se={class:"text-3xl font-black text-[#1B0B38] mb-1"},le={class:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100"},ae={class:"flex items-center justify-between"},ne={class:"text-3xl font-black text-[#1B0B38] mb-1"},oe={class:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100"},ie={class:"flex items-center justify-between"},re={class:"text-3xl font-black text-[#1B0B38] mb-1"},de={class:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100"},ce={class:"flex items-center justify-between"},ue={class:"text-3xl font-black text-[#1B0B38] mb-1"},fe={class:"flex mb-8 border-b border-gray-200 overflow-x-auto animate-fadeIn",style:{"animation-delay":"0.15s"}},xe=["onClick"],pe={class:"space-y-6"},be={key:0,class:"py-20 text-center bg-white rounded-3xl border border-dashed border-gray-200"},ge={class:"flex flex-col lg:flex-row lg:items-start justify-between gap-6"},me={class:"flex-1"},ve={class:"flex flex-wrap items-center gap-3 mb-4"},ye={class:"text-xl font-bold text-[#1B0B38]"},we={key:0,class:"status-badge bg-blue-100 text-blue-700"},he={key:1,class:"status-badge bg-green-100 text-green-700"},ke={key:2,class:"status-badge bg-gray-100 text-gray-700"},_e={class:"text-gray-500 text-sm mb-6 leading-relaxed"},Be={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},je={class:"flex items-center gap-3"},Ce={class:"font-semibold text-[#1B0B38]"},Ee={class:"flex items-center gap-3"},Ie={class:"font-semibold text-[#1B0B38]"},Fe={class:"flex items-center gap-3"},Ae={class:"font-bold text-[#E54801]"},De={class:"flex flex-wrap items-center gap-4 text-xs text-gray-400"},Te={class:"flex items-center gap-2"},$e={class:"flex items-center gap-2"},ze={class:"flex flex-col gap-3 min-w-[200px]"},Ne=["onClick"],Pe=["onClick"],Se={key:2,class:"px-6 py-4 bg-green-500 text-white font-bold rounded-2xl hover:bg-green-600 transition-colors shadow-md flex items-center justify-center gap-3"},Ve={class:"mt-12 bg-[#1B0B38] rounded-3xl p-8 text-white relative overflow-hidden animate-slide-up",style:{"animation-delay":"0.3s"}},qe={class:"relative z-10"},Le={class:"flex flex-col lg:flex-row lg:items-center justify-between gap-6"},Re={class:"flex flex-col sm:flex-row gap-4"},Me={__name:"Interventions",setup(Ge){const b=f(!0),c=f(!1),x=f("toutes"),g=f(!0),r=f([]),y=[{id:"toutes",label:"Toutes les demandes",icon:"fa-list"},{id:"pending",label:"En attente",icon:"fa-clock",status:"pending"},{id:"accepted",label:"Confirmées",icon:"fa-check-circle",status:"accepted"},{id:"completed",label:"Terminées",icon:"fa-flag-checkered",status:"completed"}];V(async()=>{g.value=!0;try{const{data:l}=await q.get("/api/prestataire/interventions");l.success&&(r.value=l.data.data)}catch(l){console.error("Erreur chargement interventions prestataire:",l)}finally{g.value=!1}});const w=$(()=>{if(x.value==="toutes")return r.value;const l=y.find(t=>t.id===x.value);return r.value.filter(t=>t.status===l.status)}),d=$(()=>({total:r.value.length,pending:r.value.filter(l=>l.status==="pending").length,accepted:r.value.filter(l=>l.status==="accepted").length,earnings:r.value.filter(l=>l.status==="completed").reduce((l,t)=>{var s;return l+parseFloat(((s=t.service)==null?void 0:s.base_price)||0)},0)})),h=l=>new Intl.NumberFormat("fr-FR").format(l||0),z=l=>({plomberie:"fa-faucet",electricite:"fa-bolt",climatisation:"fa-wind",peinture:"fa-brush"})[l==null?void 0:l.slug]||"fa-tools",N=l=>{confirm("Accepter cette intervention ?")&&alert("Fonctionnalité d'acceptation à venir")},P=l=>{confirm("Décliner cette intervention ?")&&alert("Fonctionnalité de refus à venir")};return(l,t)=>(a(),n("div",M,[v(R,{expanded:b.value,"is-open":c.value,onToggleExpand:t[0]||(t[0]=s=>b.value=!b.value)},null,8,["expanded","is-open"]),c.value?(a(),n("div",{key:0,onClick:t[1]||(t[1]=s=>c.value=!1),class:"fixed inset-0 bg-black/50 z-30 backdrop-blur-sm lg:hidden transition-opacity duration-300"})):u("",!0),e("main",G,[g.value?(a(),n("div",O,[...t[3]||(t[3]=[e("div",{class:"w-16 h-16 border-4 border-[#E54801] border-t-transparent rounded-full animate-spin mb-4"},null,-1),e("p",{class:"text-gray-500 font-bold uppercase tracking-widest text-xs"}," Chargement des interventions... ",-1)])])):(a(),n("div",H,[e("div",J,[t[5]||(t[5]=e("h1",{class:"text-xl font-bold text-[#1B0B38]"},"Interventions",-1)),e("button",{onClick:t[2]||(t[2]=s=>c.value=!c.value),class:"p-2 text-gray-500 hover:text-[#E54801]"},[...t[4]||(t[4]=[e("i",{class:"fas fa-bars text-xl"},null,-1)])])]),e("div",K,[e("div",Q,[v(F(A),{to:"/prestataire/dashboard",class:"hover:text-[#E54801] transition-colors"},{default:I(()=>[...t[6]||(t[6]=[o("Tableau de bord",-1)])]),_:1}),t[7]||(t[7]=e("i",{class:"fas fa-chevron-right text-xs"},null,-1)),t[8]||(t[8]=e("span",{class:"font-semibold text-[#1B0B38]"},"Interventions",-1))]),e("div",U,[t[11]||(t[11]=e("div",null,[e("h1",{class:"text-3xl lg:text-4xl font-black text-[#1B0B38] mb-2"}," Demandes d'Interventions "),e("p",{class:"text-gray-500 text-sm font-medium"}," Visualisez et gérez toutes les demandes de service sur la plateforme ")],-1)),e("div",W,[e("span",X,[t[9]||(t[9]=e("i",{class:"fas fa-bell mr-1"},null,-1)),o(" "+i(d.value.pending)+" nouvelles ",1)]),e("span",Y,[t[10]||(t[10]=e("i",{class:"fas fa-calendar-check mr-1"},null,-1)),o(" "+i(d.value.accepted)+" confirmées ",1)])])])]),e("div",Z,[e("div",ee,[e("div",te,[e("div",null,[e("p",se,i(d.value.total),1),t[12]||(t[12]=e("p",{class:"text-xs font-bold text-gray-400 uppercase tracking-widest"}," Total demandes ",-1))]),t[13]||(t[13]=e("div",{class:"w-12 h-12 bg-orange-50 rounded-2xl flex items-center justify-center"},[e("i",{class:"fas fa-inbox text-[#E54801] text-xl"})],-1))])]),e("div",le,[e("div",ae,[e("div",null,[e("p",ne,i(d.value.pending),1),t[14]||(t[14]=e("p",{class:"text-xs font-bold text-gray-400 uppercase tracking-widest"}," En attente ",-1))]),t[15]||(t[15]=e("div",{class:"w-12 h-12 bg-blue-50 rounded-2xl flex items-center justify-center"},[e("i",{class:"fas fa-clock text-blue-500 text-xl"})],-1))])]),e("div",oe,[e("div",ie,[e("div",null,[e("p",re,i(d.value.accepted),1),t[16]||(t[16]=e("p",{class:"text-xs font-bold text-gray-400 uppercase tracking-widest"}," Confirmées ",-1))]),t[17]||(t[17]=e("div",{class:"w-12 h-12 bg-green-50 rounded-2xl flex items-center justify-center"},[e("i",{class:"fas fa-check-circle text-green-500 text-xl"})],-1))])]),e("div",de,[e("div",ce,[e("div",null,[e("p",ue,i(h(d.value.earnings)),1),t[18]||(t[18]=e("p",{class:"text-xs font-bold text-gray-400 uppercase tracking-widest"}," Revenus terminés ",-1))]),t[19]||(t[19]=e("div",{class:"w-12 h-12 bg-purple-50 rounded-2xl flex items-center justify-center"},[e("i",{class:"fas fa-money-bill-wave text-purple-600 text-xl"})],-1))])])]),e("div",fe,[(a(),n(D,null,T(y,s=>e("button",{key:s.id,onClick:m=>x.value=s.id,class:p(["tab-button px-6 py-3 text-sm font-bold transition whitespace-nowrap",x.value===s.id?"border-b-2 border-[#E54801] text-[#E54801]":"text-gray-500 hover:text-[#1B0B38]"])},[e("i",{class:p(`fas ${s.icon} mr-2`)},null,2),o(i(s.label),1)],10,xe)),64))]),e("div",pe,[w.value.length===0?(a(),n("div",be,[...t[20]||(t[20]=[e("i",{class:"fas fa-inbox text-5xl text-gray-100 mb-4"},null,-1),e("p",{class:"text-sm font-bold text-gray-400 uppercase tracking-widest"}," Aucune intervention dans cette catégorie ",-1)])])):u("",!0),(a(!0),n(D,null,T(w.value,s=>{var m,k,_,B,j,C,E;return a(),n("div",{key:s.id,class:p(["intervention-card bg-white rounded-3xl p-6 shadow-sm border border-gray-100 border-l-4 animate-slide-up",s.status==="pending"?"border-l-orange-500":s.status==="accepted"?"border-l-blue-500":"border-l-green-500"])},[e("div",ge,[e("div",me,[e("div",ve,[e("h3",ye,i((m=s.service)==null?void 0:m.title),1),s.status==="pending"?(a(),n("span",we,[...t[21]||(t[21]=[e("i",{class:"fas fa-clock mr-1"},null,-1),o(" En attente ",-1)])])):s.status==="accepted"?(a(),n("span",he,[...t[22]||(t[22]=[e("i",{class:"fas fa-check-circle mr-1"},null,-1),o(" Confirmée ",-1)])])):(a(),n("span",ke," Terminée "))]),e("p",_e,i(s.notes||"Aucun détail supplémentaire fourni."),1),e("div",Be,[e("div",je,[t[24]||(t[24]=e("div",{class:"w-10 h-10 bg-orange-50 rounded-xl flex items-center justify-center"},[e("i",{class:"fas fa-user text-[#E54801]"})],-1)),e("div",null,[t[23]||(t[23]=e("p",{class:"text-xs text-gray-400 uppercase font-bold"}," Client ",-1)),e("p",Ce,i((k=s.requester)==null?void 0:k.name),1)])]),e("div",Ee,[t[26]||(t[26]=e("div",{class:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center"},[e("i",{class:"fas fa-map-marker-alt text-blue-500"})],-1)),e("div",null,[t[25]||(t[25]=e("p",{class:"text-xs text-gray-400 uppercase font-bold"}," Adresse ",-1)),e("p",Ie,i(((_=s.property)==null?void 0:_.city)||"Cameroun"),1)])]),e("div",Fe,[t[28]||(t[28]=e("div",{class:"w-10 h-10 bg-purple-50 rounded-xl flex items-center justify-center"},[e("i",{class:"fas fa-tag text-purple-600"})],-1)),e("div",null,[t[27]||(t[27]=e("p",{class:"text-xs text-gray-400 uppercase font-bold"}," Budget ",-1)),e("p",Ae,i(h((B=s.service)==null?void 0:B.base_price))+" FCFA ",1)])])]),e("div",De,[e("span",Te,[t[29]||(t[29]=e("i",{class:"fas fa-calendar"},null,-1)),o(" Prévue le "+i(new Date(s.scheduled_at).toLocaleDateString()),1)]),e("span",$e,[e("i",{class:p(`fas ${z((j=s.service)==null?void 0:j.category)}`)},null,2),o(" "+i((E=(C=s.service)==null?void 0:C.category)==null?void 0:E.name),1)])])]),e("div",ze,[s.status==="pending"?(a(),n("button",{key:0,onClick:S=>N(s.id),class:"px-6 py-4 bg-[#E54801] text-white font-bold rounded-2xl hover:bg-[#913327] transition-colors shadow-md flex items-center justify-center gap-3"},[...t[30]||(t[30]=[e("i",{class:"fas fa-check-circle"},null,-1),o(" Accepter ",-1)])],8,Ne)):u("",!0),s.status==="pending"?(a(),n("button",{key:1,onClick:S=>P(s.id),class:"px-6 py-4 bg-white text-red-500 border border-red-200 font-bold rounded-2xl hover:bg-red-50 transition-colors flex items-center justify-center gap-3"},[...t[31]||(t[31]=[e("i",{class:"fas fa-times-circle"},null,-1),o(" Décliner ",-1)])],8,Pe)):u("",!0),s.status==="accepted"?(a(),n("button",Se,[...t[32]||(t[32]=[e("i",{class:"fas fa-play-circle"},null,-1),o(" Démarrer ",-1)])])):u("",!0),t[33]||(t[33]=e("button",{class:"px-6 py-4 bg-gray-50 text-[#1B0B38] font-bold rounded-2xl hover:bg-gray-100 transition-colors flex items-center justify-center gap-3"},[e("i",{class:"fas fa-info-circle"}),o(" Détails ")],-1))])])],2)}),128)),e("div",Ve,[e("div",qe,[e("div",Le,[t[36]||(t[36]=e("div",null,[e("h3",{class:"text-2xl font-black mb-3"}," Assistance Technique & Support "),e("p",{class:"text-gray-300 text-sm font-medium"}," Besoin d'aide pour une intervention complexe ? Consultez notre base de connaissances ou contactez notre équipe support pour les interventions techniques difficiles. ")],-1)),e("div",Re,[v(F(A),{to:"/prestataire/assistance",class:"px-6 py-4 bg-[#E54801] text-white text-sm font-bold rounded-2xl hover:bg-[#913327] transition-colors shadow-lg flex items-center justify-center gap-3"},{default:I(()=>[...t[34]||(t[34]=[e("i",{class:"fas fa-life-ring"},null,-1),o(" Support Pro ",-1)])]),_:1}),t[35]||(t[35]=e("a",{href:"#",class:"px-6 py-4 bg-white/10 backdrop-blur-sm text-white text-sm font-bold rounded-2xl hover:bg-white/20 transition-colors flex items-center justify-center gap-3"},[e("i",{class:"fas fa-book"}),o(" Guides ")],-1))])])]),t[37]||(t[37]=e("i",{class:"fas fa-tools absolute -right-8 -bottom-8 text-[150px] text-white/5"},null,-1))])])]))])]))}},Qe=L(Me,[["__scopeId","data-v-16b6b3b6"]]);export{Qe as default};
