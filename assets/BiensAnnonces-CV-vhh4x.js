import{D as F,o,f as n,h as _,l as m,g as t,t as r,m as P,E,s as S,F as L,x as N,a as v,r as i,n as V,i as $,u as z,j as I}from"./vendor-DYpG4QdT.js";import{_ as M}from"./index-D7Lj447K.js";import{A as R}from"./Sidebar-BEKtzMk0.js";const D={class:"bg-[#F8F9FB] min-h-screen text-gray-800 antialiased flex"},T={class:"flex-1 flex flex-col h-screen overflow-hidden lg:ml-0 transition-all duration-300"},X={class:"bg-white border-b border-gray-100 flex items-center justify-between px-8 h-20 shrink-0 sticky top-0 z-30 shadow-sm"},G={class:"flex items-center gap-6"},O={class:"flex-1 overflow-y-auto p-8 bg-[#F8F9FB]"},U={key:0,class:"flex flex-col items-center justify-center h-full min-h-[60vh]"},q={key:1,class:"max-w-7xl mx-auto"},H={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10"},J={class:"bg-white p-6 rounded-3xl shadow-sm border border-gray-100"},K={class:"text-2xl font-black text-[#1B0B38]"},Q={class:"bg-white p-6 rounded-3xl shadow-sm border border-gray-100"},W={class:"text-2xl font-black text-orange-500"},Y={class:"bg-white p-6 rounded-3xl shadow-sm border border-gray-100"},Z={class:"text-2xl font-black text-green-500"},tt={class:"bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden"},et={class:"p-6 border-b border-gray-100 flex flex-col sm:flex-row justify-between items-center bg-gray-50/20 gap-4"},st={class:"flex gap-2"},at={class:"overflow-x-auto"},ot={class:"w-full text-left"},nt={class:"divide-y divide-gray-50"},rt={class:"px-6 py-5"},it={class:"flex items-center gap-4"},lt={class:"w-12 h-10 bg-gray-100 rounded-lg overflow-hidden flex items-center justify-center"},dt=["src"],ct={key:1,class:"fas fa-image text-gray-300"},ut={class:"flex flex-col"},gt={class:"text-sm font-black text-[#1B0B38]"},pt={class:"text-[10px] text-gray-400 font-medium"},xt={class:"px-6 py-5 text-xs text-gray-500 font-bold capitalize"},bt={class:"px-6 py-5 text-sm font-black text-[#1B0B38]"},vt={class:"px-6 py-5"},ft=["onChange"],ht=["selected"],yt=["selected"],_t=["selected"],mt=["selected"],wt={class:"px-6 py-5 text-right"},kt={class:"flex gap-2 justify-end opacity-0 group-hover:opacity-100 transition-opacity"},Bt={key:0},jt={class:"p-6 border-t border-gray-50 bg-gray-50/10 flex justify-between items-center"},Ct={class:"text-[10px] text-gray-400 font-black uppercase"},At={class:"flex gap-2"},Ft=["disabled"],Pt=["disabled"],Et={__name:"BiensAnnonces",setup(St){const d=i(!1),g=i(!0),p=i([]),x=i(0),f=i(0),h=i(0),l=i(1),u=i(1),b=i(""),c=async()=>{g.value=!0;try{const a={page:l.value,status:b.value},{data:e}=await v.get("/api/admin/properties",{params:a});if(e.success){p.value=e.data.data,x.value=e.data.total,u.value=e.data.last_page;const s=await v.get("/api/admin/dashboard");s.data.success&&(f.value=s.data.data.stats.pending_properties,h.value=s.data.data.stats.active_users,x.value=s.data.data.stats.total_properties)}}catch(a){console.error("Erreur chargement propriétés:",a)}finally{g.value=!1}},w=async(a,e)=>{try{const{data:s}=await v.put(`/api/admin/properties/${a.id}`,{status:e});s.success&&(a.status=e,c())}catch(s){console.error("Erreur mise à jour statut bien:",s)}},k=()=>{l.value>1&&(l.value--,c())},B=()=>{l.value<u.value&&(l.value++,c())},j=a=>new Intl.NumberFormat("fr-CM").format(a)+" XAF",C=a=>{switch(a){case"active":return"bg-green-50 text-green-600";case"pending":return"bg-orange-50 text-orange-600";case"rejected":return"bg-red-50 text-red-600";case"rented":return"bg-blue-50 text-blue-600";default:return"bg-gray-50 text-gray-600"}};return F(c),(a,e)=>(o(),n("div",D,[_(R,{"is-open":d.value},null,8,["is-open"]),d.value?(o(),n("div",{key:0,onClick:e[0]||(e[0]=s=>d.value=!1),class:"fixed inset-0 bg-black/50 z-40 backdrop-blur-sm lg:hidden transition-opacity duration-300"})):m("",!0),t("div",T,[t("header",X,[t("div",G,[t("button",{onClick:e[1]||(e[1]=s=>d.value=!d.value),class:"w-10 h-10 rounded-xl bg-gray-50 flex items-center justify-center text-gray-400 hover:text-[#913327] transition-all lg:hidden"},[...e[3]||(e[3]=[t("i",{class:"fas fa-bars"},null,-1)])]),e[4]||(e[4]=t("h2",{class:"text-sm font-black text-[#1B0B38] uppercase tracking-tight hidden sm:block"}," Gestion Immobilière ",-1))])]),t("main",O,[g.value?(o(),n("div",U,[...e[5]||(e[5]=[t("div",{class:"w-16 h-16 border-4 border-[#E54801] border-t-transparent rounded-full animate-spin mb-4"},null,-1),t("p",{class:"text-gray-500 font-bold uppercase tracking-widest text-xs"}," Analyse du parc immobilier... ",-1)])])):(o(),n("div",q,[t("div",H,[t("div",J,[e[6]||(e[6]=t("p",{class:"text-[10px] text-gray-400 font-black uppercase tracking-widest mb-1"}," Total Biens ",-1)),t("h3",K,r(x.value),1)]),t("div",Q,[e[7]||(e[7]=t("p",{class:"text-[10px] text-gray-400 font-black uppercase tracking-widest mb-1"}," En attente Modération ",-1)),t("h3",W,r(f.value),1)]),t("div",Y,[e[8]||(e[8]=t("p",{class:"text-[10px] text-gray-400 font-black uppercase tracking-widest mb-1"}," Actifs ",-1)),t("h3",Z,r(h.value),1)])]),t("div",tt,[t("div",et,[e[10]||(e[10]=t("h4",{class:"text-xs font-black text-[#1B0B38] uppercase tracking-widest"}," Liste des Propriétés ",-1)),t("div",st,[P(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>b.value=s),onChange:c,class:"text-[10px] font-black uppercase tracking-widest border border-gray-100 rounded-lg px-3 py-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-[#E54801]/20"},[...e[9]||(e[9]=[S('<option value="" data-v-dc3287cc>Tous les statuts</option><option value="pending" data-v-dc3287cc>En attente</option><option value="active" data-v-dc3287cc>Actif</option><option value="rejected" data-v-dc3287cc>Rejeté</option><option value="rented" data-v-dc3287cc>Loué</option>',5)])],544),[[E,b.value]])])]),t("div",at,[t("table",ot,[e[13]||(e[13]=t("thead",{class:"text-[10px] font-black uppercase text-gray-400 border-b border-gray-100 bg-gray-50/50"},[t("tr",null,[t("th",{class:"px-6 py-5 tracking-widest"},"Bien"),t("th",{class:"px-6 py-5 tracking-widest"},"Propriétaire"),t("th",{class:"px-6 py-5 tracking-widest"},"Prix (XAF)"),t("th",{class:"px-6 py-5 tracking-widest"},"Status"),t("th",{class:"px-6 py-5 tracking-widest text-right"},"Action")])],-1)),t("tbody",nt,[(o(!0),n(L,null,N(p.value,s=>{var y;return o(),n("tr",{key:s.id,class:"hover:bg-gray-50/50 transition-all group"},[t("td",rt,[t("div",it,[t("div",lt,[s.images&&s.images.length>0?(o(),n("img",{key:0,src:`/storage/${s.images[0].path}`,class:"w-full h-full object-cover",alt:"Bien"},null,8,dt)):(o(),n("i",ct))]),t("div",ut,[t("span",gt,r(s.title),1),t("span",pt,r(s.city),1)])])]),t("td",xt,r(((y=s.user)==null?void 0:y.name)||"Inconnu"),1),t("td",bt,r(j(s.price)),1),t("td",vt,[t("select",{onChange:A=>w(s,A.target.value),class:V(["px-2 py-1 text-[9px] font-black uppercase rounded border-none cursor-pointer",C(s.status)])},[t("option",{value:"pending",selected:s.status==="pending"}," En Attente ",8,ht),t("option",{value:"active",selected:s.status==="active"}," Approuver ",8,yt),t("option",{value:"rejected",selected:s.status==="rejected"}," Rejeter ",8,_t),t("option",{value:"rented",selected:s.status==="rented"}," Loué ",8,mt)],42,ft)]),t("td",wt,[t("div",kt,[_(z(I),{to:`/annonces/${s.id}`,class:"w-8 h-8 rounded-lg bg-gray-50 text-[#1B0B38] hover:bg-orange-50 flex items-center justify-center transition-all"},{default:$(()=>[...e[11]||(e[11]=[t("i",{class:"fas fa-eye text-xs"},null,-1)])]),_:1},8,["to"])])])])}),128)),p.value.length===0?(o(),n("tr",Bt,[...e[12]||(e[12]=[t("td",{colspan:"5",class:"px-6 py-12 text-center text-gray-400 font-bold text-xs uppercase tracking-widest"}," Aucune propriété trouvée ",-1)])])):m("",!0)])])]),t("div",jt,[t("span",Ct,"Page "+r(l.value)+" / "+r(u.value),1),t("div",At,[t("button",{onClick:k,disabled:l.value===1,class:"px-3 py-1 bg-white border border-gray-100 rounded-lg text-xs disabled:opacity-30"}," Précédent ",8,Ft),t("button",{onClick:B,disabled:l.value>=u.value,class:"px-3 py-1 bg-white border border-gray-100 rounded-lg text-xs disabled:opacity-30"}," Suivant ",8,Pt)])])])]))])])]))}},$t=M(Et,[["__scopeId","data-v-dc3287cc"]]);export{$t as default};
