import{r as d,D as R,f as n,g as e,t as i,k as r,I as T,m as c,v as f,F as z,x as E,s as _,n as b,H as I,l as C,b as $,a as N,y as q,e as U,o as u}from"./vendor-DYpG4QdT.js";import{_ as B,u as L}from"./index-1P3Q4JPB.js";const H={class:"bg-background min-h-screen py-8"},O={class:"max-w-6xl mx-auto px-4"},Q={class:"bg-card rounded-2xl p-6 md:p-8 shadow-sm border border-border mb-8 text-center"},Y={class:"inline-block"},J={class:"text-xl md:text-2xl font-bold text-foreground"},G={class:"text-foreground/60 mt-1"},K={class:"text-2xl md:text-3xl font-bold text-secondary mt-3"},W={class:"flex flex-col lg:flex-row gap-8"},Z={class:"lg:w-2/3"},ee={class:"bg-card rounded-2xl p-6 md:p-8 shadow-sm border border-border"},ae={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},te={class:"md:col-span-2"},se={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},re=["min"],oe={class:"grid grid-cols-2 gap-3"},le=["onClick"],de={class:"bg-muted/40 rounded-2xl p-6 border border-border"},ne={class:"mb-6"},ie={class:"grid grid-cols-2 gap-4"},ue={class:"text-sm text-foreground/70 mb-6"},ce={class:"flex items-start gap-3 cursor-pointer"},me={key:0,class:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-xl text-sm"},pe={key:1,class:"mb-4 p-4 bg-green-50 border border-green-200 text-green-700 rounded-xl text-sm"},ve=["disabled"],fe={key:0},xe={key:1,class:"flex items-center gap-3"},be={__name:"ProgrammerVisite",setup(ge){var y,h,w,k,M;const F=$(),X=U(),x=L(),m=d(!1),g=d(!0),l=d(""),p=d(""),v=d({title:"Chargement...",location:"...",price:0}),t=d({property_id:F.query.property_id||null,lastName:((h=(y=x.user)==null?void 0:y.name)==null?void 0:h.split(" ").slice(1).join(" "))||"",firstName:((k=(w=x.user)==null?void 0:w.name)==null?void 0:k.split(" ")[0])||"",phone:((M=x.user)==null?void 0:M.phone)||"",date:"",time:"09:00",paymentMethod:"orange",agree:!1});R(async()=>{if(!t.value.property_id){l.value="Aucun bien sélectionné.",g.value=!1;return}try{const{data:o}=await N.get(`/api/properties/${t.value.property_id}`);o.success&&(v.value=o.data)}catch(o){console.error("Erreur chargement propriété:",o),l.value="Impossible de charger les détails du bien."}finally{g.value=!1}});const P=[{value:"09:00",label:"09:00 - 10:00"},{value:"10:30",label:"10:30 - 11:30"},{value:"14:00",label:"14:00 - 15:00"},{value:"15:30",label:"15:30 - 16:30"}],j=q(()=>{const o=new Date;return o.setDate(o.getDate()+1),o.toISOString().split("T")[0]}),A=o=>new Intl.NumberFormat("fr-FR").format(o),D=async()=>{var o,a;if(l.value="",p.value="",!t.value.lastName||!t.value.firstName||!t.value.phone){l.value="Veuillez remplir toutes vos informations personnelles.";return}if(!t.value.date){l.value="Veuillez sélectionner une date de visite.";return}if(!t.value.agree){l.value="Vous devez accepter les conditions de paiement.";return}m.value=!0;try{const s=`${t.value.date} ${t.value.time}:00`,V={property_id:t.value.property_id,scheduled_at:s,notes:`Mode paiement: ${t.value.paymentMethod}`},{data:S}=await N.post("/api/tenant/book-visit",V);S.success&&(p.value=S.message||"Visite réservée avec succès ! Vous recevrez une confirmation par SMS.",setTimeout(()=>X.push("/locataire/dashboard"),3e3))}catch(s){console.error("Erreur réservation:",s),l.value=((a=(o=s.response)==null?void 0:o.data)==null?void 0:a.message)||"Une erreur est survenue lors de la réservation."}finally{m.value=!1}};return(o,a)=>(u(),n("div",H,[e("div",O,[e("div",Q,[a[8]||(a[8]=e("h1",{class:"text-2xl md:text-3xl font-bold text-primary mb-3"}," Programmer votre visite ",-1)),e("div",Y,[e("h2",J,i(v.value.title),1),e("p",G,[a[7]||(a[7]=e("i",{class:"fas fa-map-marker-alt text-secondary mr-2"},null,-1)),r(" "+i(v.value.location),1)]),e("p",K,i(A(v.value.price))+" FCFA ",1)])]),e("div",W,[e("div",Z,[e("div",ee,[e("form",{onSubmit:T(D,["prevent"]),class:"space-y-8"},[e("div",null,[a[12]||(a[12]=e("h3",{class:"text-xl md:text-2xl font-semibold text-primary mb-5 flex items-center gap-2"},[e("i",{class:"fas fa-user text-secondary"}),r(" Vos informations ")],-1)),e("div",ae,[e("div",null,[a[9]||(a[9]=e("label",{class:"block text-foreground/80 font-medium mb-2"},[r(" Nom "),e("span",{class:"text-secondary"},"*")],-1)),c(e("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>t.value.lastName=s),type:"text",required:"",placeholder:"Votre nom",class:"w-full px-4 py-3 border border-border rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent transition-all"},null,512),[[f,t.value.lastName]])]),e("div",null,[a[10]||(a[10]=e("label",{class:"block text-foreground/80 font-medium mb-2"},[r(" Prénom "),e("span",{class:"text-secondary"},"*")],-1)),c(e("input",{"onUpdate:modelValue":a[1]||(a[1]=s=>t.value.firstName=s),type:"text",required:"",placeholder:"Votre prénom",class:"w-full px-4 py-3 border border-border rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent transition-all"},null,512),[[f,t.value.firstName]])]),e("div",te,[a[11]||(a[11]=e("label",{class:"block text-foreground/80 font-medium mb-2"},[r(" Numéro de paiement Mobile Money "),e("span",{class:"text-secondary"},"*")],-1)),c(e("input",{"onUpdate:modelValue":a[2]||(a[2]=s=>t.value.phone=s),type:"tel",required:"",placeholder:"6XX XXX XXX",class:"w-full px-4 py-3 border border-border rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent transition-all"},null,512),[[f,t.value.phone]])])])]),e("div",null,[a[15]||(a[15]=e("h3",{class:"text-xl md:text-2xl font-semibold text-primary mb-5 flex items-center gap-2"},[e("i",{class:"fas fa-calendar-alt text-secondary"}),r(" Quand souhaitez-vous visiter ? ")],-1)),e("div",se,[e("div",null,[a[13]||(a[13]=e("label",{class:"block text-foreground/80 font-medium mb-2"},[r(" Date "),e("span",{class:"text-secondary"},"*")],-1)),c(e("input",{"onUpdate:modelValue":a[3]||(a[3]=s=>t.value.date=s),type:"date",required:"",min:j.value,class:"w-full px-4 py-3 border border-border rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent transition-all"},null,8,re),[[f,t.value.date]])]),e("div",null,[a[14]||(a[14]=e("label",{class:"block text-foreground/80 font-medium mb-2"},[r(" Créneau "),e("span",{class:"text-secondary"},"*")],-1)),e("div",oe,[(u(),n(z,null,E(P,s=>e("button",{key:s.value,type:"button",onClick:V=>t.value.time=s.value,class:b(["py-3 text-center border rounded-xl cursor-pointer transition-all text-sm font-medium",t.value.time===s.value?"bg-secondary text-white border-secondary shadow-md":"bg-muted/50 border-border hover:border-secondary hover:text-secondary text-foreground/70"])},i(s.label),11,le)),64))])])])]),e("div",de,[a[25]||(a[25]=_('<h3 class="text-xl md:text-2xl font-bold text-primary mb-5 flex items-center gap-2" data-v-5a90e94e><i class="fas fa-credit-card text-secondary" data-v-5a90e94e></i> Paiement des frais de visite </h3><div class="space-y-3 mb-6" data-v-5a90e94e><div class="flex justify-between text-foreground/80" data-v-5a90e94e><span data-v-5a90e94e>Frais accompagnement &amp; carburant</span><span class="font-bold" data-v-5a90e94e>15 000 FCFA</span></div><hr class="border-border" data-v-5a90e94e><div class="flex justify-between text-lg font-bold text-secondary" data-v-5a90e94e><span data-v-5a90e94e>Total</span><span data-v-5a90e94e>15 000 FCFA</span></div></div>',2)),e("div",ne,[a[18]||(a[18]=e("label",{class:"block text-foreground/80 font-medium mb-3"},"Mode de paiement",-1)),e("div",ie,[e("button",{type:"button",onClick:a[4]||(a[4]=s=>t.value.paymentMethod="orange"),class:b(["border-2 rounded-2xl py-5 flex flex-col items-center transition-all",t.value.paymentMethod==="orange"?"border-secondary bg-secondary/10 shadow-md":"border-border hover:border-secondary/50 bg-card"])},[...a[16]||(a[16]=[e("div",{class:"w-10 h-10 rounded-full bg-orange-500 flex items-center justify-center mb-2"},[e("i",{class:"fas fa-mobile-alt text-white text-lg"})],-1),e("span",{class:"font-semibold text-foreground"},"Orange Money",-1)])],2),e("button",{type:"button",onClick:a[5]||(a[5]=s=>t.value.paymentMethod="mtn"),class:b(["border-2 rounded-2xl py-5 flex flex-col items-center transition-all",t.value.paymentMethod==="mtn"?"border-secondary bg-secondary/10 shadow-md":"border-border hover:border-secondary/50 bg-card"])},[...a[17]||(a[17]=[e("div",{class:"w-10 h-10 rounded-full bg-yellow-400 flex items-center justify-center mb-2"},[e("i",{class:"fas fa-mobile-alt text-yellow-900 text-lg"})],-1),e("span",{class:"font-semibold text-foreground"},"MTN MoMo",-1)])],2)])]),e("div",ue,[a[20]||(a[20]=e("p",{class:"mb-3"},[e("i",{class:"fas fa-sms text-secondary mr-2"}),r(" Confirmation par "),e("strong",null,"SMS"),r(" après paiement ")],-1)),e("label",ce,[c(e("input",{"onUpdate:modelValue":a[6]||(a[6]=s=>t.value.agree=s),type:"checkbox",required:"",class:"mt-1 h-5 w-5 rounded border-border text-secondary focus:ring-secondary"},null,512),[[I,t.value.agree]]),a[19]||(a[19]=e("span",null,[r(" J'accepte payer "),e("strong",null,"15 000 FCFA"),r(" immédiatement (non remboursable sauf annulation 48h avant) ")],-1))])]),l.value?(u(),n("div",me,[a[21]||(a[21]=e("i",{class:"fas fa-exclamation-circle mr-2"},null,-1)),r(i(l.value),1)])):C("",!0),p.value?(u(),n("div",pe,[a[22]||(a[22]=e("i",{class:"fas fa-check-circle mr-2"},null,-1)),r(i(p.value),1)])):C("",!0),e("button",{type:"submit",disabled:m.value,class:"w-full bg-secondary hover:bg-primary text-white font-bold py-5 rounded-2xl text-lg transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-3 disabled:opacity-60 disabled:cursor-not-allowed"},[m.value?(u(),n("span",xe,[...a[24]||(a[24]=[e("i",{class:"fas fa-spinner animate-spin"},null,-1),r(" Traitement en cours... ",-1)])])):(u(),n("span",fe,[...a[23]||(a[23]=[e("i",{class:"fas fa-lock mr-3"},null,-1),r(" PAYER 15 000 FCFA ET RÉSERVER ",-1)])]))],8,ve)])],32)])]),a[26]||(a[26]=_('<div class="lg:w-1/3 space-y-6" data-v-5a90e94e><div class="hidden lg:block bg-card rounded-2xl p-6 shadow-sm border border-border" data-v-5a90e94e><h3 class="text-lg font-bold text-primary mb-4 flex items-center gap-2" data-v-5a90e94e><i class="fas fa-info-circle text-secondary" data-v-5a90e94e></i> Informations importantes </h3><ul class="space-y-4 text-foreground/70 text-sm" data-v-5a90e94e><li class="flex items-start gap-3" data-v-5a90e94e><i class="fas fa-clock text-secondary mt-0.5" data-v-5a90e94e></i><span data-v-5a90e94e>Lun-Ven : 8h-18h, Sam : 9h-13h</span></li><li class="flex items-start gap-3" data-v-5a90e94e><i class="fas fa-map-marker-alt text-secondary mt-0.5" data-v-5a90e94e></i><span data-v-5a90e94e>Rue 1.234, Quartier Bastos, Yaoundé</span></li><li class="flex items-start gap-3" data-v-5a90e94e><i class="fas fa-phone-alt text-secondary mt-0.5" data-v-5a90e94e></i><span data-v-5a90e94e>+237 6XX XX XX XX</span></li></ul></div><div class="lg:hidden bg-card rounded-2xl p-5 shadow-sm border border-border" data-v-5a90e94e><h3 class="text-base font-semibold text-primary mb-1 flex justify-between items-center" data-v-5a90e94e> Infos importantes <i class="fas fa-chevron-down text-secondary" data-v-5a90e94e></i></h3><p class="text-sm text-foreground/60" data-v-5a90e94e> Horaires 8h-18h • Bastos • Paiement sécurisé </p></div><div class="hidden lg:block bg-card rounded-2xl p-6 shadow-sm border border-border" data-v-5a90e94e><h3 class="text-lg font-bold text-primary mb-4 flex items-center gap-2" data-v-5a90e94e><i class="fas fa-list-ol text-secondary" data-v-5a90e94e></i> Déroulement </h3><ol class="space-y-4 text-foreground/70 text-sm" data-v-5a90e94e><li class="flex items-start gap-3" data-v-5a90e94e><div class="w-7 h-7 bg-secondary/10 text-secondary rounded-full flex items-center justify-center font-bold text-xs flex-shrink-0" data-v-5a90e94e> 1 </div><span data-v-5a90e94e>Paiement &amp; soumission du formulaire</span></li><li class="flex items-start gap-3" data-v-5a90e94e><div class="w-7 h-7 bg-secondary/10 text-secondary rounded-full flex items-center justify-center font-bold text-xs flex-shrink-0" data-v-5a90e94e> 2 </div><span data-v-5a90e94e>Confirmation par SMS dans les 2h</span></li><li class="flex items-start gap-3" data-v-5a90e94e><div class="w-7 h-7 bg-secondary/10 text-secondary rounded-full flex items-center justify-center font-bold text-xs flex-shrink-0" data-v-5a90e94e> 3 </div><span data-v-5a90e94e>Visite sur place avec notre agent</span></li></ol></div><div class="hidden lg:block bg-primary rounded-2xl p-6 shadow-sm text-white" data-v-5a90e94e><h3 class="text-lg font-bold mb-4 flex items-center gap-2" data-v-5a90e94e><i class="fas fa-exclamation-circle" data-v-5a90e94e></i> À noter </h3><ul class="space-y-3 text-sm text-white/90" data-v-5a90e94e><li class="flex items-start gap-3" data-v-5a90e94e><i class="fas fa-check text-white/70 mt-0.5" data-v-5a90e94e></i><span data-v-5a90e94e>Arrivez 10 min avant l&#39;heure prévue</span></li><li class="flex items-start gap-3" data-v-5a90e94e><i class="fas fa-check text-white/70 mt-0.5" data-v-5a90e94e></i><span data-v-5a90e94e>Pièce d&#39;identité obligatoire</span></li><li class="flex items-start gap-3" data-v-5a90e94e><i class="fas fa-check text-white/70 mt-0.5" data-v-5a90e94e></i><span data-v-5a90e94e>Non remboursable sauf annulation 48h avant</span></li></ul></div><div class="bg-card rounded-2xl p-6 shadow-sm border border-border" data-v-5a90e94e><div class="grid grid-cols-3 gap-4 text-center" data-v-5a90e94e><div data-v-5a90e94e><i class="fas fa-shield-alt text-secondary text-2xl mb-2 block" data-v-5a90e94e></i><p class="text-xs text-foreground/70 font-medium" data-v-5a90e94e> Paiement sécurisé </p></div><div data-v-5a90e94e><i class="fas fa-sms text-secondary text-2xl mb-2 block" data-v-5a90e94e></i><p class="text-xs text-foreground/70 font-medium" data-v-5a90e94e> Confirmation SMS </p></div><div data-v-5a90e94e><i class="fas fa-headset text-secondary text-2xl mb-2 block" data-v-5a90e94e></i><p class="text-xs text-foreground/70 font-medium" data-v-5a90e94e> Support 24/7 </p></div></div></div></div>',1))])])]))}},ke=B(be,[["__scopeId","data-v-5a90e94e"]]);export{ke as default};
