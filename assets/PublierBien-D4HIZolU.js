import{o as s,f as r,g as e,k,t as b,h as T,i as D,u as P,j as I,F as g,x as f,I as h,m as i,v as u,E as v,s as N,l as x,r as y,J as q,e as z,n as w,a as L}from"./vendor-DYpG4QdT.js";import{_ as M}from"./index-DftiFTCt.js";const R={class:"bg-[#FAF9F5] min-h-screen py-12 px-6"},$={class:"max-w-3xl mx-auto"},G={class:"mb-10 flex justify-between items-end"},O={class:"text-gray-500 font-bold uppercase tracking-[0.2em] text-[11px] mt-4 italic"},Y={class:"mb-10 flex gap-2"},J={key:0,class:"bg-white p-8 rounded-3xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-300"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},W={class:"col-span-1 md:col-span-2"},X={class:"block text-[10px] text-gray-400 font-bold uppercase mb-2 ml-2"},H={key:1,class:"bg-white p-8 rounded-3xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-300"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Z={class:"grid grid-cols-3 gap-2 col-span-1 md:col-span-2"},_={class:"col-span-1 md:col-span-2"},ee={key:2,class:"bg-white p-8 rounded-3xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-300"},te={class:"mb-8"},oe={key:0,class:"grid grid-cols-4 sm:grid-cols-6 gap-3 mt-4"},le=["src"],se=["onClick"],re={class:"grid grid-cols-2 sm:grid-cols-3 gap-3"},ae=["onClick"],ne={class:"text-[11px] font-bold uppercase tracking-tight"},ie={class:"flex gap-4 pt-4"},de=["disabled"],ue={key:0,class:"fas fa-circle-notch fa-spin"},pe={key:1,class:"fas fa-paper-plane"},ce={__name:"PublierBien",setup(be){const E=z(),a=y(1),B=["Informations Générales","Emplacement & Détails","Médias & Services"],V=()=>{if(a.value===1&&(!l.title||!l.price))return alert("Veuillez remplir les champs obligatoires.");if(a.value===2&&(!l.city||!l.location))return alert("Veuillez renseigner l'emplacement.");a.value++},l=q({title:"",type:"rent",category:"Appartement",price:null,etat:"Très bon état",city:"Yaoundé",location:"",bedrooms:0,bathrooms:0,area:0,description:"",amenities:[],images:[]}),m=y([]),c=y(!1),C=["Climatisation","Parking","Sécurité 24/7","Wi-Fi","Eau courante","Électricité","Générateur","Concierge","Meublé"],S=n=>{const t=l.amenities.indexOf(n);t===-1?l.amenities.push(n):l.amenities.splice(t,1)},j=n=>{Array.from(n.target.files).forEach(o=>{l.images.push(o);const d=new FileReader;d.onload=p=>m.value.push(p.target.result),d.readAsDataURL(o)})},U=n=>{l.images.splice(n,1),m.value.splice(n,1)},A=async()=>{var n,t;if(!c.value){c.value=!0;try{const o=new FormData;Object.keys(l).forEach(p=>{p==="images"?l.images.forEach(F=>o.append("images[]",F)):p==="amenities"?o.append("amenities",l.amenities.join(", ")):o.append(p,l[p]||"")});const{data:d}=await L.post("/api/properties",o,{headers:{"Content-Type":"multipart/form-data"}});d.success&&(alert("Votre annonce a été soumise avec succès et est en attente de modération."),E.push("/bailleur/mes-biens"))}catch(o){console.error("Erreur publication bien:",o),alert(((t=(n=o.response)==null?void 0:n.data)==null?void 0:t.message)||"Une erreur est survenue lors de la publication.")}finally{c.value=!1}}};return(n,t)=>(s(),r("div",R,[e("div",$,[e("div",G,[e("div",null,[t[13]||(t[13]=e("h1",{class:"text-3xl font-black text-[#1B0B38] leading-tight uppercase relative"},[k(" Publier un nouveau bien "),e("span",{class:"absolute -bottom-2 left-0 w-20 h-1 bg-[#E54801]"})],-1)),e("p",O," Étape "+b(a.value)+" sur 3 : "+b(B[a.value-1]),1)]),T(P(I),{to:"/bailleur/dashboard",class:"group flex items-center gap-2 text-xs font-black text-gray-400 hover:text-[#E54801] transition-all uppercase tracking-widest"},{default:D(()=>[...t[14]||(t[14]=[e("span",null,"Annuler",-1),e("div",{class:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center group-hover:bg-[#E54801] group-hover:text-white transition-all"},[e("i",{class:"fas fa-times"})],-1)])]),_:1})]),e("div",Y,[(s(),r(g,null,f(3,o=>e("div",{key:o,class:w(["h-1.5 flex-1 rounded-full transition-all duration-500",o<=a.value?"bg-[#E54801]":"bg-gray-200"])},null,2)),64))]),e("form",{onSubmit:h(A,["prevent"]),class:"space-y-8 animate-fadeIn"},[a.value===1?(s(),r("section",J,[t[22]||(t[22]=e("div",{class:"flex items-center gap-3 mb-6"},[e("div",{class:"w-8 h-8 rounded-full bg-[#E54801]/10 text-[#E54801] flex items-center justify-center font-bold text-sm"}," 1 "),e("h3",{class:"text-xs font-black text-[#1B0B38] uppercase tracking-widest"}," Informations de base ")],-1)),e("div",Q,[e("div",W,[t[15]||(t[15]=e("label",{class:"block text-[10px] text-gray-400 font-bold uppercase mb-2 ml-2"},"Titre de l'annonce",-1)),i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>l.title=o),type:"text",required:"",placeholder:"Ex: Villa de luxe à Bastos",class:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl text-sm font-medium focus:ring-2 focus:ring-[#E54801]/20 outline-none transition-all placeholder-gray-300 text-gray-700"},null,512),[[u,l.title]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-[10px] text-gray-400 font-bold uppercase mb-2 ml-2"},"Type d'offre",-1)),i(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>l.type=o),class:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl text-sm font-medium focus:ring-2 focus:ring-[#E54801]/20 outline-none transition-all cursor-pointer text-gray-700"},[...t[16]||(t[16]=[e("option",{value:"rent"},"À Louer",-1),e("option",{value:"sale"},"À Vendre",-1)])],512),[[v,l.type]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-[10px] text-gray-400 font-bold uppercase mb-2 ml-2"},"Catégorie",-1)),i(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>l.category=o),class:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl text-sm font-medium focus:ring-2 focus:ring-[#E54801]/20 outline-none transition-all cursor-pointer text-gray-700"},[...t[18]||(t[18]=[N('<option value="Villa" data-v-0619ac2e>Villa</option><option value="Appartement" data-v-0619ac2e>Appartement</option><option value="Studio" data-v-0619ac2e>Studio</option><option value="Chambre" data-v-0619ac2e>Chambre</option><option value="Bureau" data-v-0619ac2e>Bureau / Local Pro</option><option value="Terrain" data-v-0619ac2e>Terrain</option>',6)])],512),[[v,l.category]])]),e("div",null,[e("label",X,"Prix (XAF) "+b(l.type==="rent"?"/ mois":""),1),i(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>l.price=o),type:"number",required:"",placeholder:"0",class:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl text-sm font-bold focus:ring-2 focus:ring-[#E54801]/20 outline-none transition-all text-[#1B0B38]"},null,512),[[u,l.price,void 0,{number:!0}]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-[10px] text-gray-400 font-bold uppercase mb-2 ml-2"},"État du bien",-1)),i(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>l.etat=o),class:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl text-sm font-medium focus:ring-2 focus:ring-[#E54801]/20 outline-none transition-all cursor-pointer text-gray-700"},[...t[20]||(t[20]=[e("option",{value:"Neuf"},"Neuf",-1),e("option",{value:"Très bon état"},"Très bon état",-1),e("option",{value:"Bon état"},"Bon état",-1),e("option",{value:"À rénover"},"À rénover",-1)])],512),[[v,l.etat]])])])])):x("",!0),a.value===2?(s(),r("section",H,[t[29]||(t[29]=e("div",{class:"flex items-center gap-3 mb-6"},[e("div",{class:"w-8 h-8 rounded-full bg-[#E54801]/10 text-[#E54801] flex items-center justify-center font-bold text-sm"}," 2 "),e("h3",{class:"text-xs font-black text-[#1B0B38] uppercase tracking-widest"}," Détails & Localisation ")],-1)),e("div",K,[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-[10px] text-gray-400 font-bold uppercase mb-2 ml-2"},"Ville",-1)),i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>l.city=o),type:"text",required:"",placeholder:"Ex: Yaoundé",class:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl text-sm font-medium focus:ring-2 focus:ring-[#E54801]/20 outline-none transition-all text-gray-700"},null,512),[[u,l.city]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-[10px] text-gray-400 font-bold uppercase mb-2 ml-2"},"Quartier / Adresse",-1)),i(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>l.location=o),type:"text",required:"",placeholder:"Ex: Bastos, Rue de l'Ambassade",class:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl text-sm font-medium focus:ring-2 focus:ring-[#E54801]/20 outline-none transition-all text-gray-700"},null,512),[[u,l.location]])]),e("div",Z,[e("div",null,[t[25]||(t[25]=e("label",{class:"block text-[9px] text-gray-400 font-bold uppercase mb-2 ml-2 text-center"},"Chambres",-1)),i(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>l.bedrooms=o),type:"number",class:"w-full px-4 py-3 bg-gray-50 border-none rounded-xl text-sm font-bold text-center"},null,512),[[u,l.bedrooms,void 0,{number:!0}]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-[9px] text-gray-400 font-bold uppercase mb-2 ml-2 text-center"},"SDB",-1)),i(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>l.bathrooms=o),type:"number",class:"w-full px-4 py-3 bg-gray-50 border-none rounded-xl text-sm font-bold text-center"},null,512),[[u,l.bathrooms,void 0,{number:!0}]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-[9px] text-gray-400 font-bold uppercase mb-2 ml-2 text-center"},"Surface (m²)",-1)),i(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>l.area=o),type:"number",class:"w-full px-4 py-3 bg-gray-50 border-none rounded-xl text-sm font-bold text-center"},null,512),[[u,l.area,void 0,{number:!0}]])])]),e("div",_,[t[28]||(t[28]=e("label",{class:"block text-[10px] text-gray-400 font-bold uppercase mb-2 ml-2"},"Description détaillée",-1)),i(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=o=>l.description=o),rows:"4",placeholder:"Décrivez les atouts de votre bien...",class:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl text-sm font-medium focus:ring-2 focus:ring-[#E54801]/20 outline-none transition-all text-gray-700"},null,512),[[u,l.description]])])])])):x("",!0),a.value===3?(s(),r("section",ee,[t[34]||(t[34]=e("div",{class:"flex items-center gap-3 mb-6"},[e("div",{class:"w-8 h-8 rounded-full bg-[#E54801]/10 text-[#E54801] flex items-center justify-center font-bold text-sm"}," 3 "),e("h3",{class:"text-xs font-black text-[#1B0B38] uppercase tracking-widest"}," Médias & Commodités ")],-1)),e("div",te,[t[32]||(t[32]=e("label",{class:"block text-[10px] text-gray-400 font-bold uppercase mb-4"},"Photos du bien",-1)),e("div",{onClick:t[11]||(t[11]=o=>n.$refs.fileInput.click()),class:"border-2 border-dashed border-gray-200 rounded-3xl p-8 text-center group hover:border-[#E54801]/50 hover:bg-[#E54801]/5 transition-all cursor-pointer relative overflow-hidden"},[e("input",{ref:"fileInput",type:"file",multiple:"",accept:"image/*",class:"hidden",onChange:j},null,544),t[30]||(t[30]=e("div",{class:"relative z-10"},[e("div",{class:"w-12 h-12 mx-auto bg-gray-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-white transition-colors"},[e("i",{class:"fas fa-cloud-upload-alt text-xl text-gray-300 group-hover:text-[#E54801]"})]),e("p",{class:"text-[11px] font-bold text-gray-500 group-hover:text-[#1B0B38]"}," Cliquez pour ajouter des photos ")],-1))]),m.value.length?(s(),r("div",oe,[(s(!0),r(g,null,f(m.value,(o,d)=>(s(),r("div",{key:d,class:"relative aspect-square group"},[e("img",{src:o,class:"w-full h-full object-cover rounded-xl border border-gray-100 shadow-sm"},null,8,le),e("button",{onClick:h(p=>U(d),["stop"]),class:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-[10px] opacity-0 group-hover:opacity-100 transition-opacity shadow-lg"},[...t[31]||(t[31]=[e("i",{class:"fas fa-times"},null,-1)])],8,se)]))),128))])):x("",!0)]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-[10px] text-gray-400 font-bold uppercase mb-4"},"Commodités",-1)),e("div",re,[(s(),r(g,null,f(C,o=>e("div",{key:o,onClick:d=>S(o),class:w(["flex items-center gap-3 p-3 rounded-xl border-2 cursor-pointer transition-all",l.amenities.includes(o)?"border-[#E54801] bg-[#E54801]/5 text-[#E54801]":"border-gray-50 bg-gray-50 text-gray-500 hover:border-gray-200"])},[e("i",{class:w([l.amenities.includes(o)?"fas fa-check-circle":"far fa-circle","text-xs"])},null,2),e("span",ne,b(o),1)],10,ae)),64))])])])):x("",!0),e("div",ie,[a.value>1?(s(),r("button",{key:0,type:"button",onClick:t[12]||(t[12]=o=>a.value--),class:"flex-1 py-4 bg-white border border-gray-200 text-gray-500 rounded-2xl font-black uppercase tracking-widest hover:bg-gray-50 transition-all text-xs"}," Précédent ")):x("",!0),a.value<3?(s(),r("button",{key:1,type:"button",onClick:V,class:"flex-1 py-4 bg-[#1B0B38] text-white rounded-2xl font-black uppercase tracking-widest hover:bg-[#E54801] transition-all text-xs shadow-lg"}," Suivant ")):(s(),r("button",{key:2,type:"submit",disabled:c.value,class:"flex-2 py-4 bg-[#E54801] text-white rounded-2xl font-black uppercase tracking-widest hover:bg-[#913327] hover:shadow-lg hover:-translate-y-1 transition-all shadow-xl shadow-[#E54801]/20 text-xs flex items-center justify-center gap-2",style:{flex:"2"}},[c.value?(s(),r("i",ue)):(s(),r("i",pe)),k(" "+b(c.value?"Publication...":"Publier l'annonce"),1)],8,de))])],32)])]))}},ge=M(ce,[["__scopeId","data-v-0619ac2e"]]);export{ge as default};
