import{_ as A}from"./index-1P3Q4JPB.js";import{A as j}from"./Sidebar-B_9G7nhg.js";import{D as V,o as s,f as a,h as q,l as E,g as t,t as o,s as h,k as x,F,x as B,a as _,r as c,n as g}from"./vendor-DYpG4QdT.js";const z={class:"bg-[#FAF9F5] text-gray-800 antialiased min-h-screen flex relative"},N={class:"flex-1 overflow-y-auto bg-[#FAF9F5] p-4 lg:p-8 transition-all duration-300"},D={key:0,class:"flex flex-col items-center justify-center h-full min-h-[60vh]"},L={key:1,class:"max-w-5xl mx-auto h-full"},S={class:"lg:hidden flex items-center justify-between mb-6"},$={class:"text-xl font-bold text-[#1B0B38]"},I={class:"text-center mb-12 animate-fadeIn"},R={class:"text-3xl sm:text-4xl font-bold text-[#1B0B38] mb-3"},M={class:"text-gray-600 max-w-2xl mx-auto"},O={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 sm:p-8 mb-8 animate-slide-up"},T={class:"flex flex-col sm:flex-row items-center justify-between gap-6"},U={class:"text-2xl font-bold text-[#1B0B38]"},G={class:"text-gray-600 mt-1"},Q={class:"relative w-24 h-24"},X={class:"w-24 h-24 transform -rotate-90 origin-center"},H=["stroke-dashoffset"],J={class:"absolute inset-0 flex items-center justify-center"},K={class:"text-lg font-bold text-[#E54801]"},W={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12 animate-slide-up",style:{"animation-delay":"0.1s"}},Y={class:"space-y-4 mb-8"},Z={class:"flex gap-4"},tt={class:"font-semibold text-gray-900"},et={class:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 sm:p-8 h-fit"},st={class:"text-center mb-8"},at={class:"mb-4"},lt={class:"text-5xl font-bold text-[#E54801]"},ot={class:"bg-gradient-to-r from-[#E54801]/5 to-[#913327]/5 rounded-xl p-4 mb-6 border border-[#E54801]/20"},it={class:"space-y-2 text-sm"},rt={class:"flex items-center gap-2"},nt=["disabled"],dt={key:0,class:"fas fa-spinner fa-spin"},ct={key:1,class:"fas fa-credit-card"},ut={class:"mb-12 animate-slide-up",style:{"animation-delay":"0.2s"}},ft={class:"space-y-6 relative pl-4 sm:pl-0"},mt={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4"},xt={class:"flex items-center gap-3 mb-2"},pt={key:0,class:"text-xs font-bold px-3 py-1 rounded-full bg-gradient-to-br from-[#E54801] to-[#913327] text-white"},vt={key:1,class:"text-xs font-bold px-3 py-1 rounded-full bg-gray-100 text-gray-500"},gt={class:"text-xs font-medium text-gray-600"},bt={class:"text-xl font-bold text-[#1B0B38]"},yt={key:0,class:"fas fa-play-circle text-4xl text-[#E54801]"},ht={key:1,class:"fas fa-lock text-4xl text-gray-300"},_t={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-6"},wt={key:0,class:"w-full px-4 py-3 bg-[#E54801] text-white rounded-lg font-semibold hover:bg-[#913327] transition"},kt={key:1,disabled:"",class:"w-full px-4 py-3 bg-gray-100 text-gray-400 rounded-lg font-semibold cursor-not-allowed"},Et={key:2,class:"text-center p-20"},Ft={__name:"Formation",setup(Bt){const b=c(!0),f=c(!1),y=c(!0),p=c(!1),l=c(null),r=c(!1),m=c(0),w=async()=>{var d;y.value=!0;try{const[e,u]=await Promise.all([_.get("/api/formations"),_.get("/api/agent/formations")]);if(e.data.success&&e.data.data.length>0&&(l.value=e.data.data[0]),u.data.success&&u.data.data.length>0){const n=u.data.data.find(i=>{var v;return i.id===((v=l.value)==null?void 0:v.id)});n&&(r.value=!0,m.value=((d=n.pivot)==null?void 0:d.progress)||0)}}catch(e){console.error("Erreur chargement formation:",e)}finally{y.value=!1}},C=async()=>{if(l.value&&confirm(`Confirmer l'achat de la formation "${l.value.title}" pour ${k(l.value.price)} ?`)){p.value=!0;try{const{data:d}=await _.post(`/api/formations/${l.value.id}/purchase`);d.success&&(r.value=!0,alert("✓ Paiement réussi ! Vous avez maintenant accès à la formation complète."),w())}catch{alert("Erreur lors de la transaction. Veuillez réessayer.")}finally{p.value=!1}}},k=d=>new Intl.NumberFormat("fr-CM",{style:"currency",currency:"XAF",maximumFractionDigits:0}).format(d||0);return V(w),(d,e)=>{var u;return s(),a("div",z,[q(j,{expanded:b.value,"is-open":f.value,onToggleExpand:e[0]||(e[0]=n=>b.value=!b.value)},null,8,["expanded","is-open"]),f.value?(s(),a("div",{key:0,onClick:e[1]||(e[1]=n=>f.value=!1),class:"fixed inset-0 bg-black/50 z-30 backdrop-blur-sm lg:hidden transition-opacity duration-300"})):E("",!0),t("main",N,[y.value?(s(),a("div",D,[...e[3]||(e[3]=[t("div",{class:"w-16 h-16 border-4 border-[#E54801] border-t-transparent rounded-full animate-spin mb-4"},null,-1),t("p",{class:"text-gray-500 font-bold uppercase tracking-widest text-xs"}," Accès au portail académique... ",-1)])])):l.value?(s(),a("div",L,[t("div",S,[t("h1",$,o(l.value.title),1),t("button",{onClick:e[2]||(e[2]=n=>f.value=!f.value),class:"p-2 text-gray-500 hover:text-[#E54801]"},[...e[4]||(e[4]=[t("i",{class:"fas fa-bars text-xl"},null,-1)])])]),t("div",I,[e[5]||(e[5]=t("div",{class:"inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-[#E54801] to-[#913327] mb-6 shadow-lg"},[t("i",{class:"fas fa-graduation-cap text-4xl text-white"})],-1)),t("h1",R,o(l.value.title),1),t("p",M,o(l.value.description),1)]),t("div",O,[t("div",T,[t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-600 mb-2"},"Votre progression",-1)),t("h2",U,o(r.value?m.value<100?"Formation en cours":"Formation complétée":"Étape 1 : Paiement et Accès"),1),t("p",G,o(r.value?"Continuez votre apprentissage pour obtenir votre certification":"Déverrouillez la formation avec un paiement unique"),1)]),t("div",Q,[(s(),a("svg",X,[e[7]||(e[7]=t("circle",{cx:"48",cy:"48",r:"40",stroke:"#E5E7EB","stroke-width":"3",fill:"none"},null,-1)),t("circle",{class:"transition-all duration-700 ease-out",cx:"48",cy:"48",r:"40",stroke:"url(#gradient)","stroke-width":"3",fill:"none","stroke-dasharray":"251.2","stroke-dashoffset":251.2-251.2*m.value/100,"stroke-linecap":"round"},null,8,H),e[8]||(e[8]=t("defs",null,[t("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%"},[t("stop",{offset:"0%",style:{"stop-color":"#e54801","stop-opacity":"1"}}),t("stop",{offset:"100%",style:{"stop-color":"#913327","stop-opacity":"1"}})])],-1))])),t("div",J,[t("span",K,o(m.value)+"%",1)])])])]),r.value?E("",!0):(s(),a("div",W,[t("div",null,[e[13]||(e[13]=t("h3",{class:"text-lg font-bold text-[#1B0B38] mb-6"}," Ce qui vous attend ",-1)),t("div",Y,[e[11]||(e[11]=h('<div class="flex gap-4" data-v-e1df4905><div class="flex-shrink-0 w-12 h-12 rounded-xl bg-[#E54801]/10 flex items-center justify-center" data-v-e1df4905><i class="fas fa-video text-[#E54801]" data-v-e1df4905></i></div><div data-v-e1df4905><h4 class="font-semibold text-gray-900" data-v-e1df4905> Contenu multimédia </h4><p class="text-sm text-gray-600" data-v-e1df4905> Vidéos et modules engageants </p></div></div>',1)),t("div",Z,[e[10]||(e[10]=t("div",{class:"flex-shrink-0 w-12 h-12 rounded-xl bg-[#E54801]/10 flex items-center justify-center"},[t("i",{class:"fas fa-book text-[#E54801]"})],-1)),t("div",null,[t("h4",tt,o(((u=l.value.modules)==null?void 0:u.length)||0)+" modules interactifs ",1),e[9]||(e[9]=t("p",{class:"text-sm text-gray-600"},"Théorie + cas pratiques",-1))])]),e[12]||(e[12]=h('<div class="flex gap-4" data-v-e1df4905><div class="flex-shrink-0 w-12 h-12 rounded-xl bg-[#E54801]/10 flex items-center justify-center" data-v-e1df4905><i class="fas fa-file-contract text-[#E54801]" data-v-e1df4905></i></div><div data-v-e1df4905><h4 class="font-semibold text-gray-900" data-v-e1df4905> Examen de certification </h4><p class="text-sm text-gray-600" data-v-e1df4905> Reconnaissance professionnelle </p></div></div>',1))]),e[14]||(e[14]=t("div",{class:"bg-blue-50 border border-blue-200 rounded-xl p-4"},[t("p",{class:"text-sm text-blue-900"},[t("i",{class:"fas fa-info-circle text-blue-600 mr-2"}),t("strong",null,"Accès illimité:"),x(" Une fois acheté, accédez au contenu sans limite de temps ")])],-1))]),t("div",et,[t("div",st,[e[16]||(e[16]=t("p",{class:"text-sm text-gray-600 mb-2"}," Prix unique de la formation ",-1)),t("div",at,[t("span",lt,o(k(l.value.price).split(" ")[0]),1),e[15]||(e[15]=t("p",{class:"text-lg text-gray-600 mt-1"},"FCFA",-1))]),e[17]||(e[17]=t("p",{class:"text-xs text-gray-500"},"Paiement unique, accès à vie",-1))]),t("div",ot,[t("ul",it,[e[19]||(e[19]=t("li",{class:"flex items-center gap-2"},[t("i",{class:"fas fa-check text-green-500"}),t("span",null,"Accès immédiat")],-1)),t("li",rt,[e[18]||(e[18]=t("i",{class:"fas fa-check text-green-500"},null,-1)),t("span",null,o(l.value.badge),1)]),e[20]||(e[20]=t("li",{class:"flex items-center gap-2"},[t("i",{class:"fas fa-check text-green-500"}),t("span",null,"Satisfaction garantie")],-1))])]),t("button",{onClick:C,disabled:p.value,class:"w-full py-4 bg-gradient-to-r from-[#E54801] to-[#913327] text-white rounded-xl font-bold text-lg shadow-lg hover:shadow-xl hover:-translate-y-1 transition mb-3 flex items-center justify-center gap-2 disabled:opacity-50"},[p.value?(s(),a("i",dt)):(s(),a("i",ct)),e[21]||(e[21]=x(" Procéder au Paiement ",-1))],8,nt),e[22]||(e[22]=t("p",{class:"text-xs text-gray-500 text-center"}," Paiement sécurisé via NotchPay ",-1))])])),t("div",ut,[e[25]||(e[25]=t("h3",{class:"text-2xl font-bold text-[#1B0B38] mb-8"}," Programme de formation ",-1)),t("div",ft,[(s(!0),a(F,null,B(l.value.modules,(n,i)=>(s(),a("div",{key:i,class:g(["relative pl-8 sm:pl-10 pb-8 border-l-2",i===0?"border-[#E54801]":"border-gray-200"])},[t("div",{class:g(["absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-white border-4",i===0?"border-[#E54801]":"border-gray-200"])},null,2),t("div",{class:g(["bg-white rounded-2xl shadow-sm border border-gray-100 p-6 sm:p-8 transition-all",!r.value&&i>0?"opacity-75 grayscale-[0.5]":"hover:-translate-y-1"])},[t("div",mt,[t("div",null,[t("div",xt,[r.value||i===0?(s(),a("span",pt,"ACCESSIBLE")):(s(),a("span",vt,"VERROUILLÉ")),t("span",gt,"Durée: "+o(n.duration),1)]),t("h4",bt,o(n.title),1)]),r.value||i===0?(s(),a("i",yt)):(s(),a("i",ht))]),t("div",_t,[(s(!0),a(F,null,B(n.lessons,(v,P)=>(s(),a("div",{key:P,class:"text-sm text-gray-700 flex items-center gap-2"},[t("i",{class:g(r.value||i===0?"fas fa-check text-green-500":"fas fa-lock text-gray-300")},null,2),x(" "+o(v),1)]))),128))]),r.value||i===0?(s(),a("button",wt,[e[23]||(e[23]=t("i",{class:"fas fa-play mr-2"},null,-1)),x(" "+o(m.value>i*30?"Continuer":"Commencer ce module"),1)])):(s(),a("button",kt,[...e[24]||(e[24]=[t("i",{class:"fas fa-lock mr-2"},null,-1),x(" Verrouillé ",-1)])]))],2)],2))),128))])]),e[26]||(e[26]=h('<div class="mb-12 animate-slide-up" style="animation-delay:0.3s;" data-v-e1df4905><h3 class="text-2xl font-bold text-[#1B0B38] mb-6" data-v-e1df4905> Questions fréquentes </h3><div class="space-y-3" data-v-e1df4905><details class="group bg-white rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition cursor-pointer" data-v-e1df4905><summary class="flex items-center justify-between w-full px-6 py-4" data-v-e1df4905><h4 class="font-semibold text-gray-900" data-v-e1df4905> Le certificat est-il valable partout ? </h4><i class="fas fa-chevron-down text-[#E54801] group-open:rotate-180 transition" data-v-e1df4905></i></summary><p class="px-6 pb-4 text-gray-600 text-sm" data-v-e1df4905> Oui, notre certification est reconnue dans toute l&#39;Afrique et acceptée par tous les organismes immobiliers professionnels au Cameroun. </p></details></div></div>',1))])):(s(),a("div",Et,[...e[27]||(e[27]=[t("p",{class:"text-gray-400"},"Aucune formation disponible pour le moment.",-1)])]))])])}}},jt=A(Ft,[["__scopeId","data-v-e1df4905"]]);export{jt as default};
